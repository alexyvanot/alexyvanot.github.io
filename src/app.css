@tailwind base;
@tailwind components;
@tailwind utilities;

/* Surbrillance pour les titres ciblés par hash (rechargement de page) */
.hash-target-highlight {
	background: #fef08a !important;
	color: #1a1a1a !important;
	-webkit-text-fill-color: #1a1a1a !important;
	-webkit-background-clip: unset !important;
	background-clip: unset !important;
	padding: 0.25rem 0.5rem !important;
	margin-left: -0.5rem !important;
	border-radius: 0.25rem !important;
	scroll-margin-top: 120px !important;
}

/* Forcer la couleur sur tous les éléments enfants */
.hash-target-highlight *,
.heading-highlight * {
	color: #1a1a1a !important;
	-webkit-text-fill-color: #1a1a1a !important;
}

/* Style de sélection de texte personnalisé */
::selection {
	background: hsl(243 80% 60%);
	color: white;
}

/* Sélection spécifique pour les éléments avec fond jaune */
.hash-target-highlight::selection,
.hash-target-highlight *::selection,
.heading-highlight::selection,
.heading-highlight *::selection {
	background: hsl(243 80% 40%);
	color: white;
}

/* Offset pour tous les headings quand ciblés par hash */
h1, h2, h3, h4, h5, h6 {
	scroll-margin-top: 120px;
}

/* Optimisation du chargement des fonts avec fallback */
body {
	font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
	font-display: swap; /* Améliore le FOUT */
	background-color: white; /* Évite l'écran noir pendant les transitions */
}

@media (prefers-color-scheme: dark) {
	body {
		background-color: #0a0a0a; /* Mode sombre */
	}
}

/* Évite le flash pendant les transitions */
html, body {
	min-height: 100%;
}

/* S'assurer que l'app container a le bon background */
.app-container {
	min-height: 100vh;
	background-color: transparent; /* Transparent pour laisser voir l'AnimatedBackground */
	position: relative;
	z-index: 1;
}

@layer base {
	:root {
		--background: 243 0% 100%;
		--foreground: 243 0% 10%;
		--card: 243 0% 100%;
		--card-foreground: 243 0% 15%;
		--popover: 243 0% 100%;
		--popover-foreground: 243 95% 10%;
		--primary: 243 0% 4%;
		--primary-foreground: 0 0% 100%;
		--secondary: 243 10% 90%;
		--secondary-foreground: 0 0% 0%;
		--muted: 205 10% 95%;
		--muted-foreground: 243 0% 40%;
		--accent: 205 10% 90%;
		--accent-foreground: 243 0% 15%;
		--destructive: 0 50% 50%;
		--destructive-foreground: 243 0% 100%;
		--border: 243 2% 82%;
		--input: 243 2% 50%;
		--ring: 243 0% 4%;
		--radius: 0.5rem;
	}
	.dark {
		--background: 0 0% 0%;
		--foreground: 243 0% 90%;
		--card: 243 0% 0%;
		--card-foreground: 243 0% 90%;
		--popover: 243 10% 5%;
		--popover-foreground: 243 0% 90%;
		--primary: 243 0% 100%;
		--primary-foreground: 0 0% 0%;
		--secondary: 243 10% 10%;
		--secondary-foreground: 0 0% 100%;
		--muted: 205 10% 15%;
		--muted-foreground: 243 0% 60%;
		--accent: 205 10% 15%;
		--accent-foreground: 243 0% 90%;
		--destructive: 0 50% 30%;
		--destructive-foreground: 243 0% 90%;
		--border: 250 2% 25%;
		--input: 250 2% 25%;
		--ring: 243 0% 100%;
		--radius: 0.5rem;
	}
}

@layer base {
	* {
		@apply border-border;
	}
	body {
		@apply bg-background text-foreground;
	}
}

/* Support pour les transitions de thème personnalisées - Ultra optimisé */
html.theme-transitioning *[class*="bg-"],
html.theme-transitioning nav,
html.theme-transitioning button,
html.theme-transitioning .card,
html.theme-transitioning [role="dialog"],
html.theme-transitioning [role="tooltip"] {
	transition: background-color 150ms ease-out !important;
	/* Pas de transition sur color/border = changement instantané */
}

/* Optimisations des performances */
* {
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
}

/* Transitions pour les interactions uniquement (pas pendant le changement de thème) */
html:not(.theme-transitioning) a, 
html:not(.theme-transitioning) button {
	transition: all 0.15s ease-out;
}

/* Améliorer le rendu */
html {
	will-change: scroll-position;
	transform: translateZ(0);
}

/* Preload hover effects */
a[data-sveltekit-preload-data="hover"]:hover {
	transform: translateZ(0);
}
