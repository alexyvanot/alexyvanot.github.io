import{i as N}from"../chunks/BBQJk-hg.js";import{h as et,i as at,e as st,a as nt,j as it}from"../chunks/CrmI9aP4.js";import{p as Y,k as Q,B as rt,g as b,e as C,r as z,b as D,a as Z,z as ot,c as J,F as lt,u as ct,s as X,j as dt,f as ut,G as pt}from"../chunks/_vsrSwkU.js";import{T as gt}from"../chunks/Cl4_NFfJ.js";import{P as r,a as G,g as ft,m as ht,p as mt,d as vt,c as $t,A as wt}from"../chunks/CJdCxNYU.js";import"../chunks/BnVkC7s-.js";import"../chunks/16nJmpNK.js";import"../chunks/CUghvS_V.js";import{o as bt}from"../chunks/f-P_mWps.js";import{b as yt,a as kt,s as _t}from"../chunks/CKiSNLsr.js";var xt=J('<div class="markdown-wrapper svelte-rrfqxz"><div class="markdown-container svelte-rrfqxz"></div></div>');function Tt(B,q){Y(q,!0);const L=()=>kt(vt,"$mode",R),[R,S]=_t();typeof r<"u"&&r.languages&&(r.languages.markup&&(r.languages.svelte=r.languages.markup),r.languages.typescript&&(r.languages.ts=r.languages.typescript),r.languages.javascript&&(r.languages.js=r.languages.javascript),r.languages.bash&&(r.languages.env=r.languages.bash,r.languages.shell=r.languages.bash,r.languages.sh=r.languages.bash),r.languages.markdown&&(r.languages.md=r.languages.markdown));let m,j=!1,y,k=!1,$=ot(void 0),W=ct(()=>L()==="dark"?"#ffffff":"#1a1a1a");function K(n){return n.replace(/:i(?:con)?\[([^\]]+)\]/g,(s,o)=>{const i=o.trim();return`<span class="md-icon ${i.startsWith("i-")?i:`i-carbon-${i}`}" aria-hidden="true"></span>`})}function U(n){let s=K(n);const o=/::toc(?:\{([^}]*)\})?/g;s=s.replace(o,(e,c)=>{const d={};c&&c.split(/\s+/).forEach(a=>{const[t,p]=a.split("=");t&&p&&(d[t]=p)});const g=parseInt(d.maxLevel||"3",10),v=d.title||"Sommaire",f=/^(#{1,6})\s+(.+)$/gm,u=[];let h;for(;(h=f.exec(n))!==null;){const a=h[1].length;if(a<=g){const t=h[2].trim(),p=t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();u.push({level:a,text:t,id:p})}}if(u.length===0)return"";let l='<nav class="toc-container" aria-label="Sommaire">';l+=`<div class="toc-title">${v}</div>`,l+='<ul class="toc-list">';for(const a of u){const t=a.level-1;l+=`<li class="toc-item toc-level-${a.level}" style="padding-left: ${t*1}rem;">`,l+=`<a href="#${a.id}" class="toc-link">${a.text}</a>`,l+="</li>"}return l+="</ul></nav>",l}),s=s.replace(/:::profile-card\s*\n([\s\S]*?)\n:::/g,(e,c)=>`<div class="profile-card">${c.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />')}</div>`);const i=/::handwritten\[([^\]]+)\](?:\{([^}]*)\})?/g;return s=s.replace(i,(e,c,d)=>{const g={};d&&d.split(/\s+/).forEach(a=>{const[t,p]=a.split("=");t&&p&&(g[t]=p)});const v=g.fontSize||"32",f=g.duration||"2000",u=g.strokeWidth||"1.2",h=g.height||"60",l=`handwritten-${Math.random().toString(36).substr(2,9)}`;return`<div class="handwritten-wrapper" data-handwritten="${encodeURIComponent(c)}" data-fontsize="${v}" data-duration="${f}" data-strokewidth="${u}" data-height="${h}" id="${l}" style="min-height: ${h}px;"></div>`}),s}function H(){return new Promise((n,s)=>{if(typeof window.Vara<"u"){n();return}if(document.querySelector('script[src="/scripts/vara.min.js"]')){const e=setInterval(()=>{typeof window.Vara<"u"&&(clearInterval(e),n())},50);setTimeout(()=>{clearInterval(e),s(new Error("Vara load timeout"))},5e3);return}const i=document.createElement("script");i.src="/scripts/vara.min.js",i.onload=()=>{setTimeout(n,100)},i.onerror=e=>s(e),document.body.appendChild(i)})}async function M(n){if(!m||k)return;const s=m.querySelectorAll("[data-handwritten]");if(s.length!==0){try{await H()}catch(o){console.error("Failed to load Vara.js:",o),s.forEach(i=>{const e=decodeURIComponent(i.getAttribute("data-handwritten")||""),c=i.getAttribute("data-fontsize")||"32";i.innerHTML=`<span style="font-size: ${c}px; font-family: 'Pacifico', cursive;">${e}</span>`});return}s.forEach(o=>{o.innerHTML="";const i=decodeURIComponent(o.getAttribute("data-handwritten")||""),e=parseInt(o.getAttribute("data-fontsize")||"32"),c=parseInt(o.getAttribute("data-duration")||"2000"),d=parseFloat(o.getAttribute("data-strokewidth")||"1.2");parseInt(o.getAttribute("data-height")||"60");try{new window.Vara(`#${o.id}`,"/fonts/Pacifico.json",[{text:i,fontSize:e,strokeWidth:d,color:n,duration:c,x:10,y:e*1.1}],{autoAnimation:!0})}catch(g){console.error("Vara init error:",g),o.innerHTML=`<span style="font-size: ${e}px; font-family: 'Pacifico', cursive;">${i}</span>`}}),k=!0}}bt(async()=>{G.use(ft()),G.use(ht()),y=mt(window),j=!0,Q($,L(),!0),await P()});async function P(){if(!j||!m||!y)return;const n=[];let s=q.content;s=s.replace(/:::values-grid(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,e,c)=>{const d={};e&&e.split(/\s+/).forEach(l=>{const[a,t]=l.split("=");a&&t&&(d[a]=t)});const g=d.cols||"2",v=/::value\[([^\]]+)\](?:\{([^}]*)\})?\s*\n([\s\S]*?)(?=::value|\n::$|$)/g;let f="",u;for(;(u=v.exec(c))!==null;){const l=u[1],a=u[2]||"";let t=u[3].trim().replace(/\n::$/,"").trim();const p={};a&&a.split(/\s+/).forEach(O=>{const[A,I]=O.split("=");A&&I&&(p[A]=I)});const _=p.icon||"✨",T=p.color||"primary";t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>"),f+=`<div class="value-card value-card-${T}"><div class="value-card-icon">${_}</div><div class="value-card-content"><h4 class="value-card-title">${l}</h4><p class="value-card-description">${t}</p></div></div>`}const h=`<div class="values-grid values-grid-cols-${g}">${f}</div>`;return n.push(h),`<!--HTMLBLOCK${n.length-1}-->`}),s=s.replace(/:::buttons(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,e,c)=>{const d={};e&&e.split(/\s+/).forEach(l=>{const[a,t]=l.split("=");a&&t&&(d[a]=t)});const g=d.align||"center",v=/::button\[([^\]]+)\](?:\{([^}]*)\})?/g;let f="",u;for(;(u=v.exec(c))!==null;){const l=u[1],a=u[2]||"",t={};a&&a.split(/\s+/).forEach(F=>{const[w,V]=F.split("=");w&&V&&(t[w]=V)});const p=t.href||"#",_=t.icon||"",T=t.style||"ghost",A=t.newTab==="true"?' target="_blank" rel="noopener noreferrer"':"",I=_?`<span class="btn-icon">${_}</span>`:"";f+=`<a href="${p}" class="md-btn md-btn-${T}"${A}>${I}<span class="btn-label">${l}</span></a>`}const h=`<div class="md-buttons md-buttons-${g}">${f}</div>`;return n.push(h),`<!--HTMLBLOCK${n.length-1}-->`}),s=s.replace(/:::tags(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,e,c)=>{const d={};e&&e.split(/\s+/).forEach(l=>{const[a,t]=l.split("=");a&&t&&(d[a]=t)});const g=d.layout||"wrap",v=/::tag\[([^\]]+)\](?:\{([^}]*)\})?/g;let f="",u;for(;(u=v.exec(c))!==null;){const l=u[1],a=u[2]||"",t={};if(a){const F=/(\w+)=(?:"([^"]*)"|(\S+))/g;let w;for(;(w=F.exec(a))!==null;){const V=w[1],tt=w[2]!==void 0?w[2]:w[3];t[V]=tt}}const p=t.icon||"",_=t.desc?t.desc.replace(/_/g," "):"",T=t.full?t.full.replace(/_/g," "):"",O=p?`<span class="tag-icon">${p}</span>`:"",A=_?`<span class="tag-desc">${_}</span>`:"",I=T?`<div class="tag-full">${T}</div>`:"";f+=`<div class="md-tag"><div class="tag-header">${O}<span class="tag-label">${l}</span>${A}</div>${I}</div>`}const h=`<div class="md-tags md-tags-${g}">${f}</div>`;return n.push(h),`<!--HTMLBLOCK${n.length-1}-->`}),s=U(s);let o=await G.parse(s);n.forEach((i,e)=>{o=o.replace(`<!--HTMLBLOCK${e}-->`,i)}),m.innerHTML=y.sanitize(o,{ADD_ATTR:["data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"],ADD_TAGS:["nav"],ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","a","ul","ol","li","strong","em","code","pre","blockquote","img","div","span","br","hr","table","thead","tbody","tr","th","td","nav","details","summary"],ALLOWED_ATTR:["href","src","alt","title","class","id","style","target","rel","data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"]}),r.highlightAllUnder(m),await lt(),k=!1,await M(b(W))}rt(()=>{const n=L();j&&b($)!==void 0&&b($)!==n&&(Q($,n,!0),k=!1,P())});var E=xt(),x=C(E);yt(x,n=>m=n,()=>m),z(E),D(B,E),Z(),S()}var At=J('<div class="attachments-section mt-12 svelte-cwls5q"><h3 class="section-title flex items-center gap-2 text-xl font-semibold mb-6 svelte-cwls5q"><div class="i-carbon-attachment"></div> Pièces jointes</h3> <div class="attachments-grid svelte-cwls5q"></div></div>'),It=J('<div class="about-page svelte-cwls5q"><div class="container mx-auto max-w-4xl px-4"><article class="prose prose-lg dark:prose-invert max-w-none"><!></article> <!></div></div>');function Ot(B,q){Y(q,!1);const{title:L,content:R,attachments:S}=et;at(),gt(B,{get title(){return L},children:(m,j)=>{var y=It(),k=C(y),$=C(k),W=C($);Tt(W,{get content(){return R}}),z($);var K=X($,2);{var U=H=>{var M=At(),P=X(C(M),2);st(P,5,()=>S,nt,(E,x)=>{var n=dt(),s=ut(n);{var o=e=>{{let c=pt(()=>({src:b(x).src,label:b(x).label}));$t(e,{get item(){return b(c)}})}},i=e=>{wt(e,{get attachment(){return b(x)}})};N(s,e=>{b(x).type===it.Image?e(o):e(i,!1)})}D(E,n)}),z(P),z(M),D(H,M)};N(K,H=>{S&&S.length>0&&H(U)})}z(k),z(y),D(m,y)},$$slots:{default:!0}}),Z()}export{Ot as component};
