import{a as b,f as P,i as C,c as F}from"../chunks/B5sLhNz6.js";import{h as G,i as B,e as J,a as K,j as N}from"../chunks/DhwowsO9.js";import{p as E,b as j,v as O,g as c,c as w,r as m,a as H,l as Q,w as X,u as Y,s as D,f as Z,x as tt}from"../chunks/CrEmclJz.js";import{T as et}from"../chunks/Jm8e0vLk.js";import{a as S,g as at,m as rt,p as nt,d as it,P as st,c as ot,A as dt}from"../chunks/CnOPMHdK.js";import"../chunks/DOonqYDa.js";import"../chunks/BwNFXJh9.js";import"../chunks/CEhcgGci.js";import{o as ct}from"../chunks/CXz46hBc.js";import{b as lt,a as ft,s as pt}from"../chunks/Ck7d_Udb.js";var ut=P('<div class="markdown-wrapper svelte-rrfqxz"><div class="markdown-container svelte-rrfqxz"></div></div>');function mt(x,_){E(_,!0);const v=()=>ft(it,"$mode",y),[y,h]=pt();let s,$=!1,l,f=!1,d=Q(void 0),A=Y(()=>v()==="dark"?"#ffffff":"#1a1a1a");function z(t){let a=t.replace(/:::profile-card\s*\n([\s\S]*?)\n:::/g,(n,e)=>`<div class="profile-card">${e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />')}</div>`);const r=/::handwritten\[([^\]]+)\](?:\{([^}]*)\})?/g;return a=a.replace(r,(n,e,i)=>{const o={};i&&i.split(/\s+/).forEach(W=>{const[M,V]=W.split("=");M&&V&&(o[M]=V)});const T=o.fontSize||"32",L=o.duration||"2000",R=o.strokeWidth||"1.2",q=o.height||"60",U=`handwritten-${Math.random().toString(36).substr(2,9)}`;return`<div class="handwritten-wrapper" data-handwritten="${encodeURIComponent(e)}" data-fontsize="${T}" data-duration="${L}" data-strokewidth="${R}" data-height="${q}" id="${U}" style="min-height: ${q}px;"></div>`}),a}function I(){return new Promise((t,a)=>{if(typeof window.Vara<"u"){t();return}if(document.querySelector('script[src="/scripts/vara.min.js"]')){const e=setInterval(()=>{typeof window.Vara<"u"&&(clearInterval(e),t())},50);setTimeout(()=>{clearInterval(e),a(new Error("Vara load timeout"))},5e3);return}const n=document.createElement("script");n.src="/scripts/vara.min.js",n.onload=()=>{setTimeout(t,100)},n.onerror=e=>a(e),document.body.appendChild(n)})}async function g(t){if(!s||f)return;const a=s.querySelectorAll("[data-handwritten]");if(a.length!==0){try{await I()}catch(r){console.error("Failed to load Vara.js:",r),a.forEach(n=>{const e=decodeURIComponent(n.getAttribute("data-handwritten")||""),i=n.getAttribute("data-fontsize")||"32";n.innerHTML=`<span style="font-size: ${i}px; font-family: 'Pacifico', cursive;">${e}</span>`});return}a.forEach(r=>{r.innerHTML="";const n=decodeURIComponent(r.getAttribute("data-handwritten")||""),e=parseInt(r.getAttribute("data-fontsize")||"32"),i=parseInt(r.getAttribute("data-duration")||"2000"),o=parseFloat(r.getAttribute("data-strokewidth")||"1.2");parseInt(r.getAttribute("data-height")||"60");try{new window.Vara(`#${r.id}`,"/fonts/Pacifico.json",[{text:n,fontSize:e,strokeWidth:o,color:t,duration:i,x:10,y:e*1.1}],{autoAnimation:!0})}catch(T){console.error("Vara init error:",T),r.innerHTML=`<span style="font-size: ${e}px; font-family: 'Pacifico', cursive;">${n}</span>`}}),f=!0}}ct(async()=>{S.use(at()),S.use(rt()),l=nt(window),$=!0,j(d,v(),!0),await p()});async function p(){if(!$||!s||!l)return;const t=z(_.content),a=await S.parse(t);s.innerHTML=l.sanitize(a,{ADD_ATTR:["data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height"],ADD_TAGS:["div"]}),st.highlightAllUnder(s),await X(),f=!1,await g(c(A))}O(()=>{const t=v();$&&c(d)!==void 0&&c(d)!==t&&(j(d,t,!0),f=!1,p())});var u=ut(),k=w(u);lt(k,t=>s=t,()=>s),m(u),b(x,u),H(),h()}var vt=P('<div class="attachments-section mt-12 svelte-cwls5q"><h3 class="section-title flex items-center gap-2 text-xl font-semibold mb-6 svelte-cwls5q"><div class="i-carbon-attachment"></div> Pi√®ces jointes</h3> <div class="attachments-grid svelte-cwls5q"></div></div>'),ht=P('<div class="about-page svelte-cwls5q"><div class="container mx-auto max-w-4xl px-4"><article class="prose prose-lg dark:prose-invert max-w-none"><!></article> <!></div></div>');function kt(x,_){E(_,!1);const{title:v,content:y,attachments:h}=G;B(),et(x,{get title(){return v},children:(s,$)=>{var l=ht(),f=w(l),d=w(f),A=w(d);mt(A,{get content(){return y}}),m(d);var z=D(d,2);{var I=g=>{var p=vt(),u=D(w(p),2);J(u,5,()=>h,K,(k,t)=>{var a=F(),r=Z(a);{var n=i=>{{let o=tt(()=>({src:c(t).src,label:c(t).label}));ot(i,{get item(){return c(o)}})}},e=i=>{dt(i,{get attachment(){return c(t)}})};C(r,i=>{c(t).type===N.Image?i(n):i(e,!1)})}b(k,a)}),m(u),m(p),b(g,p)};C(z,g=>{h&&h.length>0&&g(I)})}m(f),m(l),b(s,l)},$$slots:{default:!0}}),H()}export{kt as component};
