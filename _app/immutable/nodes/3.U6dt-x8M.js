import{i as Y}from"../chunks/BBQJk-hg.js";import{h as st,i as nt,e as rt,a as it,j as ot}from"../chunks/Do-uVJ4u.js";import{p as tt,k as Z,B as lt,g as b,e as q,r as L,b as R,a as et,z as ct,c as X,F as dt,u as ut,s as N,j as pt,f as gt,G as ft}from"../chunks/_vsrSwkU.js";import{T as ht}from"../chunks/ND35COC0.js";import{P as o,a as Q,g as mt,m as vt,p as $t,d as wt,c as bt,A as yt}from"../chunks/Dsq3dDaP.js";import"../chunks/CB4BqdIK.js";import"../chunks/Bb6WSRUZ.js";import"../chunks/DtYdTlja.js";import{o as kt}from"../chunks/f-P_mWps.js";import{b as _t,a as xt,s as Tt}from"../chunks/CKiSNLsr.js";var At=X('<div class="markdown-wrapper svelte-rrfqxz"><div class="markdown-container svelte-rrfqxz"></div></div>');function It(W,j){tt(j,!0);const S=()=>xt(wt,"$mode",K),[K,M]=Tt();typeof o<"u"&&o.languages&&(o.languages.markup&&(o.languages.svelte=o.languages.markup),o.languages.typescript&&(o.languages.ts=o.languages.typescript),o.languages.javascript&&(o.languages.js=o.languages.javascript),o.languages.bash&&(o.languages.env=o.languages.bash,o.languages.shell=o.languages.bash,o.languages.sh=o.languages.bash),o.languages.markdown&&(o.languages.md=o.languages.markdown));let v,O=!1,y,k=!1,$=ct(void 0),U=ut(()=>S()==="dark"?"#ffffff":"#1a1a1a");function T(s,e="md-icon"){if(!s)return"";const a=s.trim();return a.startsWith("i-")?`<span class="${e} ${a}" aria-hidden="true"></span>`:/^[a-z0-9-]+$/i.test(a)?`<span class="${e} i-carbon-${a}" aria-hidden="true"></span>`:`<span class="${e}">${a}</span>`}function F(s){return s.replace(/:i(?:con)?\[([^\]]+)\]/g,(e,a)=>T(a,"md-icon"))}function C(s){return s.replace(/::(?:stars|rating)\[(\d+)\/(\d+)\]/g,(e,a,i)=>{const r=parseInt(a,10),u=parseInt(i,10),c=u-r;let d='<span class="stars-rating" aria-label="'+r+" sur "+u+'">';for(let f=0;f<r;f++)d+='<span class="star star-filled i-carbon-star-filled" aria-hidden="true"></span>';for(let f=0;f<c;f++)d+='<span class="star star-empty i-carbon-star" aria-hidden="true"></span>';return d+="</span>",d})}function P(s){let e=F(s);e=C(e);const a=/::toc(?:\{([^}]*)\})?/g;e=e.replace(a,(r,u)=>{const c={};u&&u.split(/\s+/).forEach(n=>{const[t,g]=n.split("=");t&&g&&(c[t]=g)});const d=parseInt(c.maxLevel||"3",10),f=c.title||"Sommaire",h=/^(#{1,6})\s+(.+)$/gm,p=[];let m;for(;(m=h.exec(s))!==null;){const n=m[1].length;if(n<=d){const t=m[2].trim(),g=t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();p.push({level:n,text:t,id:g})}}if(p.length===0)return"";let l='<nav class="toc-container" aria-label="Sommaire">';l+=`<div class="toc-title">${f}</div>`,l+='<ul class="toc-list">';for(const n of p){const t=n.level-1;l+=`<li class="toc-item toc-level-${n.level}" style="padding-left: ${t*1}rem;">`,l+=`<a href="#${n.id}" class="toc-link">${n.text}</a>`,l+="</li>"}return l+="</ul></nav>",l}),e=e.replace(/:::profile-card\s*\n([\s\S]*?)\n:::/g,(r,u)=>`<div class="profile-card">${u.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />')}</div>`);const i=/::handwritten\[([^\]]+)\](?:\{([^}]*)\})?/g;return e=e.replace(i,(r,u,c)=>{const d={};c&&c.split(/\s+/).forEach(n=>{const[t,g]=n.split("=");t&&g&&(d[t]=g)});const f=d.fontSize||"32",h=d.duration||"2000",p=d.strokeWidth||"1.2",m=d.height||"60",l=`handwritten-${Math.random().toString(36).substr(2,9)}`;return`<div class="handwritten-wrapper" data-handwritten="${encodeURIComponent(u)}" data-fontsize="${f}" data-duration="${h}" data-strokewidth="${p}" data-height="${m}" id="${l}" style="min-height: ${m}px;"></div>`}),e}function V(){return new Promise((s,e)=>{if(typeof window.Vara<"u"){s();return}if(document.querySelector('script[src="/scripts/vara.min.js"]')){const r=setInterval(()=>{typeof window.Vara<"u"&&(clearInterval(r),s())},50);setTimeout(()=>{clearInterval(r),e(new Error("Vara load timeout"))},5e3);return}const i=document.createElement("script");i.src="/scripts/vara.min.js",i.onload=()=>{setTimeout(s,100)},i.onerror=r=>e(r),document.body.appendChild(i)})}async function G(s){if(!v||k)return;const e=v.querySelectorAll("[data-handwritten]");if(e.length!==0){try{await V()}catch(a){console.error("Failed to load Vara.js:",a),e.forEach(i=>{const r=decodeURIComponent(i.getAttribute("data-handwritten")||""),u=i.getAttribute("data-fontsize")||"32";i.innerHTML=`<span style="font-size: ${u}px; font-family: 'Pacifico', cursive;">${r}</span>`});return}e.forEach(a=>{a.innerHTML="";const i=decodeURIComponent(a.getAttribute("data-handwritten")||""),r=parseInt(a.getAttribute("data-fontsize")||"32"),u=parseInt(a.getAttribute("data-duration")||"2000"),c=parseFloat(a.getAttribute("data-strokewidth")||"1.2");parseInt(a.getAttribute("data-height")||"60");try{new window.Vara(`#${a.id}`,"/fonts/Pacifico.json",[{text:i,fontSize:r,strokeWidth:c,color:s,duration:u,x:10,y:r*1.1}],{autoAnimation:!0})}catch(d){console.error("Vara init error:",d),a.innerHTML=`<span style="font-size: ${r}px; font-family: 'Pacifico', cursive;">${i}</span>`}}),k=!0}}kt(async()=>{Q.use(mt()),Q.use(vt()),y=$t(window),O=!0,Z($,S(),!0),await _()});async function _(){if(!O||!v||!y)return;const s=[];let e=j.content;e=e.replace(/:::values-grid(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,r,u)=>{const c={};r&&r.split(/\s+/).forEach(l=>{const[n,t]=l.split("=");n&&t&&(c[n]=t)});const d=c.cols||"2",f=/::value\[([^\]]+)\](?:\{([^}]*)\})?\s*\n([\s\S]*?)(?=::value|\n::$|$)/g;let h="",p;for(;(p=f.exec(u))!==null;){const l=p[1],n=p[2]||"";let t=p[3].trim().replace(/\n::$/,"").trim();const g={};n&&n.split(/\s+/).forEach(E=>{const[z,H]=E.split("=");z&&H&&(g[z]=H)});const x=g.icon||"sparkles",I=g.color||"primary",D=T(x,"value-icon");t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>"),h+=`<div class="value-card value-card-${I}"><div class="value-card-icon">${D}</div><div class="value-card-content"><h4 class="value-card-title">${l}</h4><p class="value-card-description">${t}</p></div></div>`}const m=`<div class="values-grid values-grid-cols-${d}">${h}</div>`;return s.push(m),`<!--HTMLBLOCK${s.length-1}-->`}),e=e.replace(/:::buttons(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,r,u)=>{const c={};r&&r.split(/\s+/).forEach(l=>{const[n,t]=l.split("=");n&&t&&(c[n]=t)});const d=c.align||"center",f=/::button\[([^\]]+)\](?:\{([^}]*)\})?/g;let h="",p;for(;(p=f.exec(u))!==null;){const l=p[1],n=p[2]||"",t={};n&&n.split(/\s+/).forEach(H=>{const[w,B]=H.split("=");w&&B&&(t[w]=B)});const g=t.href||"#",x=t.icon||"",I=t.style||"ghost",E=t.newTab==="true"?' target="_blank" rel="noopener noreferrer"':"",z=x?T(x,"btn-icon"):"";h+=`<a href="${g}" class="md-btn md-btn-${I}"${E}>${z}<span class="btn-label">${l}</span></a>`}const m=`<div class="md-buttons md-buttons-${d}">${h}</div>`;return s.push(m),`<!--HTMLBLOCK${s.length-1}-->`}),e=e.replace(/:::tags(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(i,r,u)=>{const c={};r&&r.split(/\s+/).forEach(l=>{const[n,t]=l.split("=");n&&t&&(c[n]=t)});const d=c.layout||"wrap",f=/::tag\[([^\]]+)\](?:\{([^}]*)\})?/g;let h="",p;for(;(p=f.exec(u))!==null;){const l=p[1],n=p[2]||"",t={};if(n){const H=/(\w+)=(?:"([^"]*)"|(\S+))/g;let w;for(;(w=H.exec(n))!==null;){const B=w[1],at=w[2]!==void 0?w[2]:w[3];t[B]=at}}const g=t.icon||"",x=t.desc?t.desc.replace(/_/g," "):"",I=t.full?t.full.replace(/_/g," "):"",D=g?T(g,"tag-icon"):"",E=x?`<span class="tag-desc">${x}</span>`:"",z=I?`<div class="tag-full">${I}</div>`:"";h+=`<div class="md-tag"><div class="tag-header">${D}<span class="tag-label">${l}</span>${E}</div>${z}</div>`}const m=`<div class="md-tags md-tags-${d}">${h}</div>`;return s.push(m),`<!--HTMLBLOCK${s.length-1}-->`}),e=P(e);let a=await Q.parse(e);s.forEach((i,r)=>{a=a.replace(`<!--HTMLBLOCK${r}-->`,i)}),v.innerHTML=y.sanitize(a,{ADD_ATTR:["data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"],ADD_TAGS:["nav"],ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","a","ul","ol","li","strong","em","code","pre","blockquote","img","div","span","br","hr","table","thead","tbody","tr","th","td","nav","details","summary"],ALLOWED_ATTR:["href","src","alt","title","class","id","style","target","rel","data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"]}),o.highlightAllUnder(v),await dt(),k=!1,await G(b(U))}lt(()=>{const s=S();O&&b($)!==void 0&&b($)!==s&&(Z($,s,!0),k=!1,_())});var A=At(),J=q(A);_t(J,s=>v=s,()=>v),L(A),R(W,A),et(),M()}var zt=X('<div class="attachments-section mt-12 svelte-cwls5q"><h3 class="section-title flex items-center gap-2 text-xl font-semibold mb-6 svelte-cwls5q"><div class="i-carbon-attachment"></div> Pi√®ces jointes</h3> <div class="attachments-grid svelte-cwls5q"></div></div>'),Ht=X('<div class="about-page svelte-cwls5q"><div class="container mx-auto max-w-4xl px-4"><article class="prose prose-lg dark:prose-invert max-w-none"><!></article> <!></div></div>');function Dt(W,j){tt(j,!1);const{title:S,content:K,attachments:M}=st;nt(),ht(W,{get title(){return S},children:(v,O)=>{var y=Ht(),k=q(y),$=q(k),U=q($);It(U,{get content(){return K}}),L($);var T=N($,2);{var F=C=>{var P=zt(),V=N(q(P),2);rt(V,5,()=>M,it,(G,_)=>{var A=pt(),J=gt(A);{var s=a=>{{let i=ft(()=>({src:b(_).src,label:b(_).label}));bt(a,{get item(){return b(i)}})}},e=a=>{yt(a,{get attachment(){return b(_)}})};Y(J,a=>{b(_).type===ot.Image?a(s):a(e,!1)})}R(G,A)}),L(V),L(P),R(C,P)};Y(T,C=>{M&&M.length>0&&C(F)})}L(k),L(y),R(v,y)},$$slots:{default:!0}}),et()}export{Dt as component};
