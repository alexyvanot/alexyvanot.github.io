import{a as $,f as P,i as C,c as G}from"../chunks/BqcAzpQs.js";import{h as B,i as J,e as K,a as N,j as O}from"../chunks/BJaHiZ8C.js";import{p as H,b as D,q as Q,g as l,c as _,r as m,a as L,l as X,w as Y,u as Z,s as E,f as tt,x as at}from"../chunks/Cw4gc1Sk.js";import{T as et}from"../chunks/D9ZrIUDH.js";import{P as t,a as q,g as nt,m as rt,p as st,d as it,c as ot,A as dt}from"../chunks/_L9uh_UD.js";import"../chunks/CMqbJU_n.js";import"../chunks/Dz7s3SqI.js";import"../chunks/DmAMpSkK.js";import{o as ct}from"../chunks/DPv12Lre.js";import{b as lt,a as ut,s as ft}from"../chunks/C-7ACq4D.js";var gt=P('<div class="markdown-wrapper svelte-rrfqxz"><div class="markdown-container svelte-rrfqxz"></div></div>');function pt(x,b){H(b,!0);const h=()=>ut(it,"$mode",k),[k,v]=ft();typeof t<"u"&&t.languages&&(t.languages.markup&&(t.languages.svelte=t.languages.markup),t.languages.typescript&&(t.languages.ts=t.languages.typescript),t.languages.javascript&&(t.languages.js=t.languages.javascript),t.languages.bash&&(t.languages.env=t.languages.bash,t.languages.shell=t.languages.bash,t.languages.sh=t.languages.bash),t.languages.markdown&&(t.languages.md=t.languages.markdown));let o,y=!1,u,f=!1,c=X(void 0),A=Z(()=>h()==="dark"?"#ffffff":"#1a1a1a");function z(a){let n=a.replace(/:::profile-card\s*\n([\s\S]*?)\n:::/g,(s,e)=>`<div class="profile-card">${e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />')}</div>`);const r=/::handwritten\[([^\]]+)\](?:\{([^}]*)\})?/g;return n=n.replace(r,(s,e,i)=>{const d={};i&&i.split(/\s+/).forEach(F=>{const[M,V]=F.split("=");M&&V&&(d[M]=V)});const S=d.fontSize||"32",R=d.duration||"2000",U=d.strokeWidth||"1.2",j=d.height||"60",W=`handwritten-${Math.random().toString(36).substr(2,9)}`;return`<div class="handwritten-wrapper" data-handwritten="${encodeURIComponent(e)}" data-fontsize="${S}" data-duration="${R}" data-strokewidth="${U}" data-height="${j}" id="${W}" style="min-height: ${j}px;"></div>`}),n}function I(){return new Promise((a,n)=>{if(typeof window.Vara<"u"){a();return}if(document.querySelector('script[src="/scripts/vara.min.js"]')){const e=setInterval(()=>{typeof window.Vara<"u"&&(clearInterval(e),a())},50);setTimeout(()=>{clearInterval(e),n(new Error("Vara load timeout"))},5e3);return}const s=document.createElement("script");s.src="/scripts/vara.min.js",s.onload=()=>{setTimeout(a,100)},s.onerror=e=>n(e),document.body.appendChild(s)})}async function w(a){if(!o||f)return;const n=o.querySelectorAll("[data-handwritten]");if(n.length!==0){try{await I()}catch(r){console.error("Failed to load Vara.js:",r),n.forEach(s=>{const e=decodeURIComponent(s.getAttribute("data-handwritten")||""),i=s.getAttribute("data-fontsize")||"32";s.innerHTML=`<span style="font-size: ${i}px; font-family: 'Pacifico', cursive;">${e}</span>`});return}n.forEach(r=>{r.innerHTML="";const s=decodeURIComponent(r.getAttribute("data-handwritten")||""),e=parseInt(r.getAttribute("data-fontsize")||"32"),i=parseInt(r.getAttribute("data-duration")||"2000"),d=parseFloat(r.getAttribute("data-strokewidth")||"1.2");parseInt(r.getAttribute("data-height")||"60");try{new window.Vara(`#${r.id}`,"/fonts/Pacifico.json",[{text:s,fontSize:e,strokeWidth:d,color:a,duration:i,x:10,y:e*1.1}],{autoAnimation:!0})}catch(S){console.error("Vara init error:",S),r.innerHTML=`<span style="font-size: ${e}px; font-family: 'Pacifico', cursive;">${s}</span>`}}),f=!0}}ct(async()=>{q.use(nt()),q.use(rt()),u=st(window),y=!0,D(c,h(),!0),await g()});async function g(){if(!y||!o||!u)return;const a=z(b.content),n=await q.parse(a);o.innerHTML=u.sanitize(n,{ADD_ATTR:["data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height"],ADD_TAGS:["div"]}),t.highlightAllUnder(o),await Y(),f=!1,await w(l(A))}Q(()=>{const a=h();y&&l(c)!==void 0&&l(c)!==a&&(D(c,a,!0),f=!1,g())});var p=gt(),T=_(p);lt(T,a=>o=a,()=>o),m(p),$(x,p),L(),v()}var mt=P('<div class="attachments-section mt-12 svelte-cwls5q"><h3 class="section-title flex items-center gap-2 text-xl font-semibold mb-6 svelte-cwls5q"><div class="i-carbon-attachment"></div> Pi√®ces jointes</h3> <div class="attachments-grid svelte-cwls5q"></div></div>'),ht=P('<div class="about-page svelte-cwls5q"><div class="container mx-auto max-w-4xl px-4"><article class="prose prose-lg dark:prose-invert max-w-none"><!></article> <!></div></div>');function It(x,b){H(b,!1);const{title:h,content:k,attachments:v}=B;J(),et(x,{get title(){return h},children:(o,y)=>{var u=ht(),f=_(u),c=_(f),A=_(c);pt(A,{get content(){return k}}),m(c);var z=E(c,2);{var I=w=>{var g=mt(),p=E(_(g),2);K(p,5,()=>v,N,(T,a)=>{var n=G(),r=tt(n);{var s=i=>{{let d=at(()=>({src:l(a).src,label:l(a).label}));ot(i,{get item(){return l(d)}})}},e=i=>{dt(i,{get attachment(){return l(a)}})};C(r,i=>{l(a).type===O.Image?i(s):i(e,!1)})}$(T,n)}),m(p),m(g),$(w,g)};C(z,w=>{v&&v.length>0&&w(I)})}m(f),m(u),$(o,u)},$$slots:{default:!0}}),L()}export{It as component};
