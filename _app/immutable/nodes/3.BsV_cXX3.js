import{i as J}from"../chunks/CxR73Sjp.js";import{h as tt,i as et,e as at,a as st,j as nt}from"../chunks/BBS33EK1.js";import{p as X,k as N,B as it,g as b,e as P,r as I,b as O,a as Y,z as rt,c as G,F as ot,u as lt,s as Q,j as ct,f as dt,G as ut}from"../chunks/C1Sid17B.js";import{T as pt}from"../chunks/B0pQyMzD.js";import{P as r,a as F,g as gt,m as ft,p as ht,d as mt,c as vt,A as $t}from"../chunks/B91lBniQ.js";import"../chunks/BbSSblUc.js";import"../chunks/DSGCHAQ1.js";import"../chunks/_IBmvLj4.js";import{o as wt}from"../chunks/DnvHIAsd.js";import{b as bt,a as yt,s as kt}from"../chunks/Co5jhFsc.js";var _t=G('<div class="markdown-wrapper svelte-rrfqxz"><div class="markdown-container svelte-rrfqxz"></div></div>');function xt(V,E){X(E,!0);const S=()=>yt(mt,"$mode",D),[D,H]=kt();typeof r<"u"&&r.languages&&(r.languages.markup&&(r.languages.svelte=r.languages.markup),r.languages.typescript&&(r.languages.ts=r.languages.typescript),r.languages.javascript&&(r.languages.js=r.languages.javascript),r.languages.bash&&(r.languages.env=r.languages.bash,r.languages.shell=r.languages.bash,r.languages.sh=r.languages.bash),r.languages.markdown&&(r.languages.md=r.languages.markdown));let m,C=!1,y,k=!1,$=rt(void 0),B=lt(()=>S()==="dark"?"#ffffff":"#1a1a1a");function R(a){const o=/::toc(?:\{([^}]*)\})?/g;let n=a.replace(o,(s,i)=>{const d={};i&&i.split(/\s+/).forEach(e=>{const[t,p]=e.split("=");t&&p&&(d[t]=p)});const g=parseInt(d.maxLevel||"3",10),v=d.title||"Sommaire",f=/^(#{1,6})\s+(.+)$/gm,u=[];let h;for(;(h=f.exec(a))!==null;){const e=h[1].length;if(e<=g){const t=h[2].trim(),p=t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();u.push({level:e,text:t,id:p})}}if(u.length===0)return"";let l='<nav class="toc-container" aria-label="Sommaire">';l+=`<div class="toc-title">${v}</div>`,l+='<ul class="toc-list">';for(const e of u){const t=e.level-1;l+=`<li class="toc-item toc-level-${e.level}" style="padding-left: ${t*1}rem;">`,l+=`<a href="#${e.id}" class="toc-link">${e.text}</a>`,l+="</li>"}return l+="</ul></nav>",l});n=n.replace(/:::profile-card\s*\n([\s\S]*?)\n:::/g,(s,i)=>`<div class="profile-card">${i.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" />')}</div>`);const c=/::handwritten\[([^\]]+)\](?:\{([^}]*)\})?/g;return n=n.replace(c,(s,i,d)=>{const g={};d&&d.split(/\s+/).forEach(e=>{const[t,p]=e.split("=");t&&p&&(g[t]=p)});const v=g.fontSize||"32",f=g.duration||"2000",u=g.strokeWidth||"1.2",h=g.height||"60",l=`handwritten-${Math.random().toString(36).substr(2,9)}`;return`<div class="handwritten-wrapper" data-handwritten="${encodeURIComponent(i)}" data-fontsize="${v}" data-duration="${f}" data-strokewidth="${u}" data-height="${h}" id="${l}" style="min-height: ${h}px;"></div>`}),n}function W(){return new Promise((a,o)=>{if(typeof window.Vara<"u"){a();return}if(document.querySelector('script[src="/scripts/vara.min.js"]')){const s=setInterval(()=>{typeof window.Vara<"u"&&(clearInterval(s),a())},50);setTimeout(()=>{clearInterval(s),o(new Error("Vara load timeout"))},5e3);return}const c=document.createElement("script");c.src="/scripts/vara.min.js",c.onload=()=>{setTimeout(a,100)},c.onerror=s=>o(s),document.body.appendChild(c)})}async function M(a){if(!m||k)return;const o=m.querySelectorAll("[data-handwritten]");if(o.length!==0){try{await W()}catch(n){console.error("Failed to load Vara.js:",n),o.forEach(c=>{const s=decodeURIComponent(c.getAttribute("data-handwritten")||""),i=c.getAttribute("data-fontsize")||"32";c.innerHTML=`<span style="font-size: ${i}px; font-family: 'Pacifico', cursive;">${s}</span>`});return}o.forEach(n=>{n.innerHTML="";const c=decodeURIComponent(n.getAttribute("data-handwritten")||""),s=parseInt(n.getAttribute("data-fontsize")||"32"),i=parseInt(n.getAttribute("data-duration")||"2000"),d=parseFloat(n.getAttribute("data-strokewidth")||"1.2");parseInt(n.getAttribute("data-height")||"60");try{new window.Vara(`#${n.id}`,"/fonts/Pacifico.json",[{text:c,fontSize:s,strokeWidth:d,color:a,duration:i,x:10,y:s*1.1}],{autoAnimation:!0})}catch(g){console.error("Vara init error:",g),n.innerHTML=`<span style="font-size: ${s}px; font-family: 'Pacifico', cursive;">${c}</span>`}}),k=!0}}wt(async()=>{F.use(gt()),F.use(ft()),y=ht(window),C=!0,N($,S(),!0),await x()});async function x(){if(!C||!m||!y)return;const a=[];let o=E.content;o=o.replace(/:::values-grid(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(c,s,i)=>{const d={};s&&s.split(/\s+/).forEach(l=>{const[e,t]=l.split("=");e&&t&&(d[e]=t)});const g=d.cols||"2",v=/::value\[([^\]]+)\](?:\{([^}]*)\})?\s*\n([\s\S]*?)(?=::value|\n::$|$)/g;let f="",u;for(;(u=v.exec(i))!==null;){const l=u[1],e=u[2]||"";let t=u[3].trim().replace(/\n::$/,"").trim();const p={};e&&e.split(/\s+/).forEach(q=>{const[z,L]=q.split("=");z&&L&&(p[z]=L)});const _=p.icon||"✨",A=p.color||"primary";t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\*([^*]+)\*/g,"<em>$1</em>"),f+=`<div class="value-card value-card-${A}"><div class="value-card-icon">${_}</div><div class="value-card-content"><h4 class="value-card-title">${l}</h4><p class="value-card-description">${t}</p></div></div>`}const h=`<div class="values-grid values-grid-cols-${g}">${f}</div>`;return a.push(h),`<!--HTMLBLOCK${a.length-1}-->`}),o=o.replace(/:::buttons(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(c,s,i)=>{const d={};s&&s.split(/\s+/).forEach(l=>{const[e,t]=l.split("=");e&&t&&(d[e]=t)});const g=d.align||"center",v=/::button\[([^\]]+)\](?:\{([^}]*)\})?/g;let f="",u;for(;(u=v.exec(i))!==null;){const l=u[1],e=u[2]||"",t={};e&&e.split(/\s+/).forEach(U=>{const[w,j]=U.split("=");w&&j&&(t[w]=j)});const p=t.href||"#",_=t.icon||"",A=t.style||"ghost",z=t.newTab==="true"?' target="_blank" rel="noopener noreferrer"':"",L=_?`<span class="btn-icon">${_}</span>`:"";f+=`<a href="${p}" class="md-btn md-btn-${A}"${z}>${L}<span class="btn-label">${l}</span></a>`}const h=`<div class="md-buttons md-buttons-${g}">${f}</div>`;return a.push(h),`<!--HTMLBLOCK${a.length-1}-->`}),o=o.replace(/:::tags(?:\{([^}]*)\})?\s*\n([\s\S]*?)\n:::/g,(c,s,i)=>{const d={};s&&s.split(/\s+/).forEach(l=>{const[e,t]=l.split("=");e&&t&&(d[e]=t)});const g=d.layout||"wrap",v=/::tag\[([^\]]+)\](?:\{([^}]*)\})?/g;let f="",u;for(;(u=v.exec(i))!==null;){const l=u[1],e=u[2]||"",t={};if(e){const U=/(\w+)=(?:"([^"]*)"|(\S+))/g;let w;for(;(w=U.exec(e))!==null;){const j=w[1],Z=w[2]!==void 0?w[2]:w[3];t[j]=Z}}const p=t.icon||"",_=t.desc?t.desc.replace(/_/g," "):"",A=t.full?t.full.replace(/_/g," "):"",q=p?`<span class="tag-icon">${p}</span>`:"",z=_?`<span class="tag-desc">${_}</span>`:"",L=A?`<div class="tag-full">${A}</div>`:"";f+=`<div class="md-tag"><div class="tag-header">${q}<span class="tag-label">${l}</span>${z}</div>${L}</div>`}const h=`<div class="md-tags md-tags-${g}">${f}</div>`;return a.push(h),`<!--HTMLBLOCK${a.length-1}-->`}),o=R(o);let n=await F.parse(o);a.forEach((c,s)=>{n=n.replace(`<!--HTMLBLOCK${s}-->`,c)}),m.innerHTML=y.sanitize(n,{ADD_ATTR:["data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"],ADD_TAGS:["nav"],ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","a","ul","ol","li","strong","em","code","pre","blockquote","img","div","span","br","hr","table","thead","tbody","tr","th","td","nav","details","summary"],ALLOWED_ATTR:["href","src","alt","title","class","id","style","target","rel","data-handwritten","data-fontsize","data-duration","data-strokewidth","data-height","aria-label"]}),r.highlightAllUnder(m),await ot(),k=!1,await M(b(B))}it(()=>{const a=S();C&&b($)!==void 0&&b($)!==a&&(N($,a,!0),k=!1,x())});var T=_t(),K=P(T);bt(K,a=>m=a,()=>m),I(T),O(V,T),Y(),H()}var Tt=G('<div class="attachments-section mt-12 svelte-cwls5q"><h3 class="section-title flex items-center gap-2 text-xl font-semibold mb-6 svelte-cwls5q"><div class="i-carbon-attachment"></div> Pièces jointes</h3> <div class="attachments-grid svelte-cwls5q"></div></div>'),At=G('<div class="about-page svelte-cwls5q"><div class="container mx-auto max-w-4xl px-4"><article class="prose prose-lg dark:prose-invert max-w-none"><!></article> <!></div></div>');function jt(V,E){X(E,!1);const{title:S,content:D,attachments:H}=tt;et(),pt(V,{get title(){return S},children:(m,C)=>{var y=At(),k=P(y),$=P(k),B=P($);xt(B,{get content(){return D}}),I($);var R=Q($,2);{var W=M=>{var x=Tt(),T=Q(P(x),2);at(T,5,()=>H,st,(K,a)=>{var o=ct(),n=dt(o);{var c=i=>{{let d=ut(()=>({src:b(a).src,label:b(a).label}));vt(i,{get item(){return b(d)}})}},s=i=>{$t(i,{get attachment(){return b(a)}})};J(n,i=>{b(a).type===nt.Image?i(c):i(s,!1)})}O(K,o)}),I(T),I(x),O(M,x)};J(R,M=>{H&&H.length>0&&M(W)})}I(k),I(y),O(m,y)},$$slots:{default:!0}}),Y()}export{jt as component};
