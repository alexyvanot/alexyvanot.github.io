var Mr=Object.defineProperty;var Ir=Object.getPrototypeOf;var Fr=Reflect.get;var In=r=>{throw TypeError(r)};var kr=(r,t,e)=>t in r?Mr(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>kr(r,typeof t!="symbol"?t+"":t,e),qe=(r,t,e)=>t.has(r)||In("Cannot "+e);var s=(r,t,e)=>(qe(r,t,"read from private field"),e?e.call(r):t.get(r)),u=(r,t,e)=>t.has(r)?In("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),p=(r,t,e,n)=>(qe(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),b=(r,t,e)=>(qe(r,t,"access private method"),e);var Fn=(r,t,e)=>Fr(Ir(r),e,t);import{o as T,d as We,b as Ge}from"./euP4cELH.js";import{v as S,al as Vn,q as m,w as v,bw as kn,ao as Nr,aC as At,y as Et,O as Or,bu as qn,x as q,p as se,m as Ue,X as ze,i as ie}from"./BNGu9lvx.js";import{d as _e}from"./DSJI_UeK.js";import{p as C}from"./BDddvK-q.js";import{w as L,a as Ve,g as Dr,C as un,D as cn,c as Pr}from"./S0-U2w8_.js";import{q as Rr,B as Lr,n as Br,f as y,r as Kr,t as Wr,u as Gr,v as Ur,w as ft,c as zr,a as ln,l as Hn,m as _r,j as jn,h as Yn,s as Vr,x as qr}from"./BnPDGPjS.js";function dt(r){let t=S(Vn(r));return{[Lr]:!0,[Rr]:!0,get current(){return v(t)},set current(e){m(t,e,!0)}}}dt.from=Br;dt.with=y;dt.flatten=Kr;dt.readonly=Wr;dt.isBox=Gr;dt.isWritableBox=Ur;var D,P,B,we,O,kt,ce;const gn=class gn extends Map{constructor(e){super();u(this,O);u(this,D,new Map);u(this,P,S(0));u(this,B,S(0));u(this,we,kn||-1);if(e){for(var[n,i]of e)super.set(n,i);s(this,B).v=super.size}}has(e){var n=s(this,D),i=n.get(e);if(i===void 0){var o=super.get(e);if(o!==void 0)i=b(this,O,kt).call(this,0),n.set(e,i);else return v(s(this,P)),!1}return v(i),!0}forEach(e,n){b(this,O,ce).call(this),super.forEach(e,n)}get(e){var n=s(this,D),i=n.get(e);if(i===void 0){var o=super.get(e);if(o!==void 0)i=b(this,O,kt).call(this,0),n.set(e,i);else{v(s(this,P));return}}return v(i),super.get(e)}set(e,n){var d;var i=s(this,D),o=i.get(e),a=super.get(e),c=super.set(e,n),l=s(this,P);if(o===void 0)o=b(this,O,kt).call(this,0),i.set(e,o),m(s(this,B),super.size),At(l);else if(a!==n){At(o);var h=l.reactions===null?null:new Set(l.reactions),g=h===null||!((d=o.reactions)!=null&&d.every(A=>h.has(A)));g&&At(l)}return c}delete(e){var n=s(this,D),i=n.get(e),o=super.delete(e);return i!==void 0&&(n.delete(e),m(s(this,B),super.size),m(i,-1),At(s(this,P))),o}clear(){if(super.size!==0){super.clear();var e=s(this,D);m(s(this,B),0);for(var n of e.values())m(n,-1);At(s(this,P)),e.clear()}}keys(){return v(s(this,P)),super.keys()}values(){return b(this,O,ce).call(this),super.values()}entries(){return b(this,O,ce).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return v(s(this,B)),super.size}};D=new WeakMap,P=new WeakMap,B=new WeakMap,we=new WeakMap,O=new WeakSet,kt=function(e){return kn===s(this,we)?S(e):Nr(e)},ce=function(){v(s(this,P));var e=s(this,D);if(s(this,B).v!==e.size){for(var n of Fn(gn.prototype,this,"keys").call(this))if(!e.has(n)){var i=b(this,O,kt).call(this,0);e.set(n,i)}}for([,i]of s(this,D))v(i)};let je=gn;function oe(r){Et(()=>()=>{r()})}function Hr(r,t){return setTimeout(t,r)}function _(r){Or().then(r)}const Ot="ArrowDown",hn="ArrowLeft",dn="ArrowRight",pe="ArrowUp",Xn="End",Zn="Enter",jr="Escape",Jn="Home",Yr="PageDown",Xr="PageUp",fn=" ",Zr="Tab";function Jr(r){return window.getComputedStyle(r).getPropertyValue("direction")}function Qr(r="ltr",t="horizontal"){return{horizontal:r==="rtl"?hn:dn,vertical:Ot}[t]}function $r(r="ltr",t="horizontal"){return{horizontal:r==="rtl"?dn:hn,vertical:pe}[t]}function ts(r="ltr",t="horizontal"){return["ltr","rtl"].includes(r)||(r="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:Qr(r,t),prevKey:$r(r,t)}}const es=typeof document<"u",Nn=ns();function ns(){var r,t;return es&&((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function H(r){return r instanceof HTMLElement}function Ye(r){return r instanceof Element}function Qn(r){return r instanceof Element||r instanceof SVGElement}function ui(r){return r.matches(":focus-visible")}function ci(r){return r!==null}function rs(r){return r instanceof HTMLInputElement&&"select"in r}var x,K;class ss{constructor(t){u(this,x);u(this,K,dt(null));p(this,x,t)}getCandidateNodes(){return s(this,x).rootNode.current?s(this,x).candidateSelector?Array.from(s(this,x).rootNode.current.querySelectorAll(s(this,x).candidateSelector)):s(this,x).candidateAttr?Array.from(s(this,x).rootNode.current.querySelectorAll(`[${s(this,x).candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){var e;const t=this.getCandidateNodes();t.length&&((e=t[0])==null||e.focus())}handleKeydown(t,e,n=!1){var Ct,j;const i=s(this,x).rootNode.current;if(!i||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const a=o.indexOf(t),c=Jr(i),{nextKey:l,prevKey:h}=ts(c,s(this,x).orientation.current),g=s(this,x).loop.current,d={[l]:a+1,[h]:a-1,[Jn]:0,[Xn]:o.length-1};if(n){const An=l===Ot?dn:Ot,Mn=h===pe?hn:pe;d[An]=a+1,d[Mn]=a-1}let A=d[e.key];if(A===void 0)return;e.preventDefault(),A<0&&g?A=o.length-1:A===o.length&&g&&(A=0);const k=o[A];if(k)return k.focus(),s(this,K).current=k.id,(j=(Ct=s(this,x)).onCandidateFocus)==null||j.call(Ct,k),k}getTabIndex(t){const e=this.getCandidateNodes(),n=s(this,K).current!==null;return t&&!n&&e[0]===t?(s(this,K).current=t.id,0):(t==null?void 0:t.id)===s(this,K).current?0:-1}setCurrentTabStopId(t){s(this,K).current=t}focusCurrentTabStop(){var n;const t=s(this,K).current;if(!t)return;const e=(n=s(this,x).rootNode.current)==null?void 0:n.querySelector(`#${t}`);!e||!H(e)||e.focus()}}x=new WeakMap,K=new WeakMap;var pt,nt,V,Xe,le;class is{constructor(t){u(this,V);u(this,pt);u(this,nt,null);p(this,pt,t),oe(()=>b(this,V,Xe).call(this))}run(t){b(this,V,Xe).call(this);const e=s(this,pt).ref.current;if(e){if(typeof e.getAnimations!="function"){b(this,V,le).call(this,t);return}p(this,nt,window.requestAnimationFrame(()=>{const n=e.getAnimations();if(n.length===0){b(this,V,le).call(this,t);return}Promise.allSettled(n.map(i=>i.finished)).then(()=>{b(this,V,le).call(this,t)})}))}}}pt=new WeakMap,nt=new WeakMap,V=new WeakSet,Xe=function(){s(this,nt)&&(window.cancelAnimationFrame(s(this,nt)),p(this,nt,null))},le=function(t){const e=()=>{t()};s(this,pt).afterTick?_(e):e()};var R,Dt,Pt,rt;class os{constructor(t){u(this,R);u(this,Dt);u(this,Pt);u(this,rt,S(!1));p(this,R,t),m(s(this,rt),t.open.current,!0),p(this,Dt,t.enabled??!0),p(this,Pt,new is({ref:s(this,R).ref,afterTick:s(this,R).open})),L(()=>s(this,R).open.current,e=>{e&&m(s(this,rt),!0),s(this,Dt)&&s(this,Pt).run(()=>{var n,i;e===s(this,R).open.current&&(s(this,R).open.current||m(s(this,rt),!1),(i=(n=s(this,R)).onComplete)==null||i.call(n))})})}get shouldRender(){return v(s(this,rt))}}R=new WeakMap,Dt=new WeakMap,Pt=new WeakMap,rt=new WeakMap;function F(){}class as{constructor(t,e={bubbles:!0,cancelable:!0}){f(this,"eventName");f(this,"options");this.eventName=t,this.options=e}createEvent(t){return new CustomEvent(this.eventName,{...this.options,detail:t})}dispatch(t,e){const n=this.createEvent(e);return t.dispatchEvent(n),n}listen(t,e,n){const i=o=>{e(o)};return T(t,this.eventName,i,n)}}function On(r,t=500){let e=null;const n=(...i)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{r(...i)},t)};return n.destroy=()=>{e!==null&&(clearTimeout(e),e=null)},n}function $n(r,t){return r===t||r.contains(t)}function tr(r){return(r==null?void 0:r.ownerDocument)??document}function us(r,t){const{clientX:e,clientY:n}=r,i=t.getBoundingClientRect();return e<i.left||e>i.right||n<i.top||n>i.bottom}const cs=[Zn,fn],ls=[Ot,Xr,Jn],er=[pe,Yr,Xn],hs=[...ls,...er];function Dn(r){return r.pointerType==="mouse"}function ds(r,{select:t=!1}={}){if(!r||!r.focus)return;const e=Ve(r);if(e.activeElement===r)return;const n=e.activeElement;r.focus({preventScroll:!0}),r!==n&&rs(r)&&t&&r.select()}function fs(r,{select:t=!1}={},e){const n=e();for(const i of r)if(ds(i,{select:t}),e()!==n)return!0}let Mt=S(!1);const N=class N{constructor(){Et(()=>(N._refs===0&&(N._cleanup=qn(()=>{const t=[],e=i=>{m(Mt,!1)},n=i=>{m(Mt,!0)};return t.push(T(document,"pointerdown",e,{capture:!0}),T(document,"pointermove",e,{capture:!0}),T(document,"keydown",n,{capture:!0})),ft(...t)})),N._refs++,()=>{var t;N._refs--,N._refs===0&&(m(Mt,!1),(t=N._cleanup)==null||t.call(N))}))}get current(){return v(Mt)}set current(t){m(Mt,t,!0)}};f(N,"_refs",0),f(N,"_cleanup");let Ze=N;/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var nr=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],be=nr.join(","),rr=typeof Element>"u",ht=rr?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ge=!rr&&Element.prototype.getRootNode?function(r){var t;return r==null||(t=r.getRootNode)===null||t===void 0?void 0:t.call(r)}:function(r){return r==null?void 0:r.ownerDocument},ve=function(t,e){var n;e===void 0&&(e=!0);var i=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"inert"),o=i===""||i==="true",a=o||e&&t&&(typeof t.closest=="function"?t.closest("[inert]"):ve(t.parentNode));return a},ps=function(t){var e,n=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return n===""||n==="true"},sr=function(t,e,n){if(ve(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(be));return e&&ht.call(t,be)&&i.unshift(t),i=i.filter(n),i},me=function(t,e,n){for(var i=[],o=Array.from(t);o.length;){var a=o.shift();if(!ve(a,!1))if(a.tagName==="SLOT"){var c=a.assignedElements(),l=c.length?c:a.children,h=me(l,!0,n);n.flatten?i.push.apply(i,h):i.push({scopeParent:a,candidates:h})}else{var g=ht.call(a,be);g&&n.filter(a)&&(e||!t.includes(a))&&i.push(a);var d=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),A=!ve(d,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(d&&A){var k=me(d===!0?a.children:d.children,!0,n);n.flatten?i.push.apply(i,k):i.push({scopeParent:a,candidates:k})}else o.unshift.apply(o,a.children)}}return i},ir=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},or=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||ps(t))&&!ir(t)?0:t.tabIndex},bs=function(t,e){var n=or(t);return n<0&&e&&!ir(t)?0:n},gs=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},ar=function(t){return t.tagName==="INPUT"},vs=function(t){return ar(t)&&t.type==="hidden"},ms=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return e},ys=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]},ws=function(t){if(!t.name)return!0;var e=t.form||ge(t),n=function(c){return e.querySelectorAll('input[type="radio"][name="'+c+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var o=ys(i,t.form);return!o||o===t},Ts=function(t){return ar(t)&&t.type==="radio"},Ss=function(t){return Ts(t)&&!ws(t)},xs=function(t){var e,n=t&&ge(t),i=(e=n)===null||e===void 0?void 0:e.host,o=!1;if(n&&n!==t){var a,c,l;for(o=!!((a=i)!==null&&a!==void 0&&(c=a.ownerDocument)!==null&&c!==void 0&&c.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&i;){var h,g,d;n=ge(i),i=(h=n)===null||h===void 0?void 0:h.host,o=!!((g=i)!==null&&g!==void 0&&(d=g.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},Pn=function(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height;return n===0&&i===0},Es=function(t,e){var n=e.displayCheck,i=e.getShadowRoot;if(n==="full-native"&&"checkVisibility"in t){var o=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!o}if(getComputedStyle(t).visibility==="hidden")return!0;var a=ht.call(t,"details>summary:first-of-type"),c=a?t.parentElement:t;if(ht.call(c,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="full-native"||n==="legacy-full"){if(typeof i=="function"){for(var l=t;t;){var h=t.parentElement,g=ge(t);if(h&&!h.shadowRoot&&i(h)===!0)return Pn(t);t.assignedSlot?t=t.assignedSlot:!h&&g!==t.ownerDocument?t=g.host:t=h}t=l}if(xs(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return Pn(t);return!1},Cs=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var n=0;n<e.children.length;n++){var i=e.children.item(n);if(i.tagName==="LEGEND")return ht.call(e,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}e=e.parentElement}return!1},ye=function(t,e){return!(e.disabled||vs(e)||Es(e,t)||ms(e)||Cs(e))},Je=function(t,e){return!(Ss(e)||or(e)<0||!ye(t,e))},As=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},ur=function(t){var e=[],n=[];return t.forEach(function(i,o){var a=!!i.scopeParent,c=a?i.scopeParent:i,l=bs(c,a),h=a?ur(i.candidates):c;l===0?a?e.push.apply(e,h):e.push(c):n.push({documentOrder:o,tabIndex:l,item:i,isScope:a,content:h})}),n.sort(gs).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(e)},cr=function(t,e){e=e||{};var n;return e.getShadowRoot?n=me([t],e.includeContainer,{filter:Je.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:As}):n=sr(t,e.includeContainer,Je.bind(null,e)),ur(n)},lr=function(t,e){e=e||{};var n;return e.getShadowRoot?n=me([t],e.includeContainer,{filter:ye.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):n=sr(t,e.includeContainer,ye.bind(null,e)),n},pn=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return ht.call(t,be)===!1?!1:Je(e,t)},Ms=nr.concat("iframe:not([inert]):not([inert] *)").join(","),hr=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return ht.call(t,Ms)===!1?!1:ye(e,t)};function Nt(){return{getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"}}function Is(r,t){if(!pn(r,Nt()))return Fs(r,t);const e=Ve(r),n=cr(e.body,Nt());t==="prev"&&n.reverse();const i=n.indexOf(r);return i===-1?e.body:n.slice(i+1)[0]}function Fs(r,t){const e=Ve(r);if(!hr(r,Nt()))return e.body;const n=lr(e.body,Nt());t==="prev"&&n.reverse();const i=n.indexOf(r);return i===-1?e.body:n.slice(i+1).find(a=>pn(a,Nt()))??e.body}function dr(r,t,e){const n=t.toLowerCase();if(n.endsWith(" ")){const d=n.slice(0,-1);if(r.filter(j=>j.toLowerCase().startsWith(d)).length<=1)return dr(r,d,e);const k=e==null?void 0:e.toLowerCase();if(k&&k.startsWith(d)&&k.charAt(d.length)===" "&&t.trim()===d)return e;const Ct=r.filter(j=>j.toLowerCase().startsWith(n));if(Ct.length>0){const j=e?r.indexOf(e):-1;return Rn(Ct,Math.max(j,0)).find(Ar=>Ar!==e)||e}}const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=o.toLowerCase(),c=e?r.indexOf(e):-1;let l=Rn(r,Math.max(c,0));o.length===1&&(l=l.filter(d=>d!==e));const g=l.find(d=>d==null?void 0:d.toLowerCase().startsWith(a));return g!==e?g:void 0}function Rn(r,t){return r.map((e,n)=>r[(t+n)%r.length])}const ks={afterMs:1e4,onChange:F};function fr(r,t){const{afterMs:e,onChange:n,getWindow:i}={...ks,...t};let o=null,a=S(Vn(r));function c(){return i().setTimeout(()=>{m(a,r,!0),n==null||n(r)},e)}return Et(()=>()=>{o&&i().clearTimeout(o)}),y(()=>v(a),l=>{m(a,l,!0),n==null||n(l),o&&i().clearTimeout(o),o=c()})}var W,G,Te,Se;class Ns{constructor(t){u(this,W);u(this,G);u(this,Te,q(()=>s(this,W).onMatch?s(this,W).onMatch:t=>t.focus()));u(this,Se,q(()=>s(this,W).getCurrentItem?s(this,W).getCurrentItem:s(this,W).getActiveElement));p(this,W,t),p(this,G,fr("",{afterMs:1e3,getWindow:t.getWindow})),this.handleTypeaheadSearch=this.handleTypeaheadSearch.bind(this),this.resetTypeahead=this.resetTypeahead.bind(this)}handleTypeaheadSearch(t,e){var l,h;if(!e.length)return;s(this,G).current=s(this,G).current+t;const n=v(s(this,Se))(),i=((h=(l=e.find(g=>g===n))==null?void 0:l.textContent)==null?void 0:h.trim())??"",o=e.map(g=>{var d;return((d=g.textContent)==null?void 0:d.trim())??""}),a=dr(o,s(this,G).current,i),c=e.find(g=>{var d;return((d=g.textContent)==null?void 0:d.trim())===a});return c&&v(s(this,Te))(c),c}resetTypeahead(){s(this,G).current=""}get search(){return s(this,G).current}}W=new WeakMap,G=new WeakMap,Te=new WeakMap,Se=new WeakMap;var st,Rt,bt,Y,tt,Qe,$e;class Os{constructor(t){u(this,tt);u(this,st);u(this,Rt);u(this,bt);u(this,Y,S(null));p(this,st,t),p(this,Rt,q(()=>s(this,st).enabled())),p(this,bt,fr(!1,{afterMs:t.transitTimeout??300,onChange:e=>{var n,i;v(s(this,Rt))&&((i=(n=s(this,st)).setIsPointerInTransit)==null||i.call(n,e))},getWindow:()=>Dr(s(this,st).triggerNode())})),L([t.triggerNode,t.contentNode,t.enabled],([e,n,i])=>{if(!e||!n||!i)return;const o=c=>{b(this,tt,$e).call(this,c,n)},a=c=>{b(this,tt,$e).call(this,c,e)};return ft(T(e,"pointerleave",o),T(n,"pointerleave",a))}),L(()=>v(s(this,Y)),()=>{const e=i=>{var h,g;if(!v(s(this,Y)))return;const o=i.target;if(!Ye(o))return;const a={x:i.clientX,y:i.clientY},c=((h=t.triggerNode())==null?void 0:h.contains(o))||((g=t.contentNode())==null?void 0:g.contains(o)),l=!Ls(a,v(s(this,Y)));c?b(this,tt,Qe).call(this):l&&(b(this,tt,Qe).call(this),t.onPointerExit())},n=Ve(t.triggerNode()??t.contentNode());if(n)return T(n,"pointermove",e)})}}st=new WeakMap,Rt=new WeakMap,bt=new WeakMap,Y=new WeakMap,tt=new WeakSet,Qe=function(){m(s(this,Y),null),s(this,bt).current=!1},$e=function(t,e){const n=t.currentTarget;if(!H(n))return;const i={x:t.clientX,y:t.clientY},o=Ds(i,n.getBoundingClientRect()),a=Ps(i,o),c=Rs(e.getBoundingClientRect()),l=Bs([...a,...c]);m(s(this,Y),l,!0),s(this,bt).current=!0};function Ds(r,t){const e=Math.abs(t.top-r.y),n=Math.abs(t.bottom-r.y),i=Math.abs(t.right-r.x),o=Math.abs(t.left-r.x);switch(Math.min(e,n,i,o)){case o:return"left";case i:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Ps(r,t,e=5){const n=e*1.5;switch(t){case"top":return[{x:r.x-e,y:r.y+e},{x:r.x,y:r.y-n},{x:r.x+e,y:r.y+e}];case"bottom":return[{x:r.x-e,y:r.y-e},{x:r.x,y:r.y+n},{x:r.x+e,y:r.y-e}];case"left":return[{x:r.x+e,y:r.y-e},{x:r.x-n,y:r.y},{x:r.x+e,y:r.y+e}];case"right":return[{x:r.x-e,y:r.y-e},{x:r.x+n,y:r.y},{x:r.x-e,y:r.y+e}]}}function Rs(r){const{top:t,right:e,bottom:n,left:i}=r;return[{x:i,y:t},{x:e,y:t},{x:e,y:n},{x:i,y:n}]}function Ls(r,t){const{x:e,y:n}=r;let i=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const c=t[o].x,l=t[o].y,h=t[a].x,g=t[a].y;l>n!=g>n&&e<(h-c)*(n-l)/(g-l)+c&&(i=!i)}return i}function Bs(r){const t=r.slice();return t.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),Ks(t)}function Ks(r){if(r.length<=1)return r.slice();const t=[];for(let n=0;n<r.length;n++){const i=r[n];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const e=[];for(let n=r.length-1;n>=0;n--){const i=r[n];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}return e.pop(),t.length===1&&e.length===1&&t[0].x===e[0].x&&t[0].y===e[0].y?t:t.concat(e)}const Ws="data-context-menu-trigger",Gs="data-context-menu-content",Us=new un("Menu.Root"),bn=new un("Menu.Root | Menu.Sub"),pr=new un("Menu.Content"),zs=new as("bitsmenuopen",{bubbles:!1,cancelable:!0}),_s=zr({component:"menu",parts:["trigger","content","sub-trigger","item","group","group-heading","checkbox-group","checkbox-item","radio-group","radio-item","separator","sub-content","arrow"]});var Lt,Bt;const vn=class vn{constructor(t){f(this,"opts");f(this,"isUsingKeyboard",new Ze);u(this,Lt,S(!1));u(this,Bt,S(!1));f(this,"getBitsAttr",t=>_s.getAttr(t,this.opts.variant.current));this.opts=t}static create(t){const e=new vn(t);return Us.set(e)}get ignoreCloseAutoFocus(){return v(s(this,Lt))}set ignoreCloseAutoFocus(t){m(s(this,Lt),t,!0)}get isPointerInTransit(){return v(s(this,Bt))}set isPointerInTransit(t){m(s(this,Bt),t,!0)}};Lt=new WeakMap,Bt=new WeakMap;let Ln=vn;var Kt,Wt;const mn=class mn{constructor(t,e,n){f(this,"opts");f(this,"root");f(this,"parentMenu");f(this,"contentId",y(()=>""));u(this,Kt,S(null));f(this,"contentPresence");u(this,Wt,S(null));this.opts=t,this.root=e,this.parentMenu=n,this.contentPresence=new os({ref:y(()=>this.contentNode),open:this.opts.open,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}}),n&&L(()=>n.opts.open.current,()=>{n.opts.open.current||(this.opts.open.current=!1)})}static create(t,e){return bn.set(new mn(t,e,null))}get contentNode(){return v(s(this,Kt))}set contentNode(t){m(s(this,Kt),t,!0)}get triggerNode(){return v(s(this,Wt))}set triggerNode(t){m(s(this,Wt),t,!0)}toggleOpen(){this.opts.open.current=!this.opts.open.current}onOpen(){this.opts.open.current=!0}onClose(){this.opts.open.current=!1}};Kt=new WeakMap,Wt=new WeakMap;let Bn=mn;var Gt,Ut,zt,_t,Vt,$,br,he,qt,Ht;const yn=class yn{constructor(t,e){u(this,$);f(this,"opts");f(this,"parentMenu");f(this,"rovingFocusGroup");f(this,"domContext");f(this,"attachment");u(this,Gt,S(""));u(this,Ut,0);u(this,zt);u(this,_t,S(!1));u(this,Vt);f(this,"onCloseAutoFocus",t=>{var e,n;(n=(e=this.opts.onCloseAutoFocus).current)==null||n.call(e,t),!(t.defaultPrevented||s(this,Vt))&&this.parentMenu.triggerNode&&pn(this.parentMenu.triggerNode)&&(t.preventDefault(),this.parentMenu.triggerNode.focus())});u(this,qt,q(()=>({open:this.parentMenu.opts.open.current})));u(this,Ht,q(()=>({id:this.opts.id.current,role:"menu","aria-orientation":"vertical",[this.parentMenu.root.getBitsAttr("content")]:"","data-state":Hn(this.parentMenu.opts.open.current),onkeydown:this.onkeydown,onblur:this.onblur,onfocus:this.onfocus,dir:this.parentMenu.root.opts.dir.current,style:{pointerEvents:"auto"},...this.attachment})));f(this,"popperProps",{onCloseAutoFocus:t=>this.onCloseAutoFocus(t)});this.opts=t,this.parentMenu=e,this.domContext=new cn(t.ref),this.attachment=ln(this.opts.ref,n=>{this.parentMenu.contentNode!==n&&(this.parentMenu.contentNode=n)}),e.contentId=t.id,p(this,Vt,t.isSub??!1),this.onkeydown=this.onkeydown.bind(this),this.onblur=this.onblur.bind(this),this.onfocus=this.onfocus.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this),new Os({contentNode:()=>this.parentMenu.contentNode,triggerNode:()=>this.parentMenu.triggerNode,enabled:()=>{var n;return this.parentMenu.opts.open.current&&!!((n=this.parentMenu.triggerNode)!=null&&n.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger")))},onPointerExit:()=>{this.parentMenu.opts.open.current=!1},setIsPointerInTransit:n=>{this.parentMenu.root.isPointerInTransit=n}}),p(this,zt,new Ns({getActiveElement:()=>this.domContext.getActiveElement(),getWindow:()=>this.domContext.getWindow()}).handleTypeaheadSearch),this.rovingFocusGroup=new ss({rootNode:y(()=>this.parentMenu.contentNode),candidateAttr:this.parentMenu.root.getBitsAttr("item"),loop:this.opts.loop,orientation:y(()=>"vertical")}),L(()=>this.parentMenu.contentNode,n=>{if(!n)return;const i=()=>{_(()=>{this.parentMenu.root.isUsingKeyboard.current&&this.rovingFocusGroup.focusFirstCandidate()})};return zs.listen(n,i)}),Et(()=>{this.parentMenu.opts.open.current||this.domContext.getWindow().clearTimeout(s(this,Ut))})}static create(t){return pr.set(new yn(t,bn.get()))}get search(){return v(s(this,Gt))}set search(t){m(s(this,Gt),t,!0)}get mounted(){return v(s(this,_t))}set mounted(t){m(s(this,_t),t,!0)}handleTabKeyDown(t){let e=this.parentMenu;for(;e.parentMenu!==null;)e=e.parentMenu;if(!e.triggerNode)return;t.preventDefault();const n=Is(e.triggerNode,t.shiftKey?"prev":"next");n?(this.parentMenu.root.ignoreCloseAutoFocus=!0,e.onClose(),_(()=>{n.focus(),_(()=>{this.parentMenu.root.ignoreCloseAutoFocus=!1})})):this.domContext.getDocument().body.focus()}onkeydown(t){var h,g;if(t.defaultPrevented)return;if(t.key===Zr){this.handleTabKeyDown(t);return}const e=t.target,n=t.currentTarget;if(!H(e)||!H(n))return;const i=((h=e.closest(`[${this.parentMenu.root.getBitsAttr("content")}]`))==null?void 0:h.id)===this.parentMenu.contentId.current,o=t.ctrlKey||t.altKey||t.metaKey,a=t.key.length===1;if(this.rovingFocusGroup.handleKeydown(e,t)||t.code==="Space")return;const l=b(this,$,br).call(this);i&&!o&&a&&s(this,zt).call(this,t.key,l),((g=t.target)==null?void 0:g.id)===this.parentMenu.contentId.current&&hs.includes(t.key)&&(t.preventDefault(),er.includes(t.key)&&l.reverse(),fs(l,{select:!1},()=>this.domContext.getActiveElement()))}onblur(t){var e,n;Ye(t.currentTarget)&&Ye(t.target)&&((n=(e=t.currentTarget).contains)!=null&&n.call(e,t.target)||(this.domContext.getWindow().clearTimeout(s(this,Ut)),this.search=""))}onfocus(t){this.parentMenu.root.isUsingKeyboard.current&&_(()=>this.rovingFocusGroup.focusFirstCandidate())}onItemEnter(){return b(this,$,he).call(this)}onItemLeave(t){if(t.currentTarget.hasAttribute(this.parentMenu.root.getBitsAttr("sub-trigger"))||b(this,$,he).call(this)||this.parentMenu.root.isUsingKeyboard.current)return;const e=this.parentMenu.contentNode;e==null||e.focus(),this.rovingFocusGroup.setCurrentTabStopId("")}onTriggerLeave(){return!!b(this,$,he).call(this)}handleInteractOutside(t){var n;if(!Qn(t.target))return;const e=(n=this.parentMenu.triggerNode)==null?void 0:n.id;if(t.target.id===e){t.preventDefault();return}t.target.closest(`#${e}`)&&t.preventDefault()}get shouldRender(){return this.parentMenu.contentPresence.shouldRender}get snippetProps(){return v(s(this,qt))}set snippetProps(t){m(s(this,qt),t)}get props(){return v(s(this,Ht))}set props(t){m(s(this,Ht),t)}};Gt=new WeakMap,Ut=new WeakMap,zt=new WeakMap,_t=new WeakMap,Vt=new WeakMap,$=new WeakSet,br=function(){const t=this.parentMenu.contentNode;return t?Array.from(t.querySelectorAll(`[${this.parentMenu.root.getBitsAttr("item")}]:not([data-disabled])`)):[]},he=function(){return this.parentMenu.root.isPointerInTransit},qt=new WeakMap,Ht=new WeakMap;let Kn=yn;var gt,jt;class Vs{constructor(t,e){f(this,"opts");f(this,"content");f(this,"attachment");u(this,gt,S(!1));u(this,jt,q(()=>({id:this.opts.id.current,tabindex:-1,role:"menuitem","aria-disabled":Yn(this.opts.disabled.current),"data-disabled":jn(this.opts.disabled.current),"data-highlighted":v(s(this,gt))?"":void 0,[this.content.parentMenu.root.getBitsAttr("item")]:"",onpointermove:this.onpointermove,onpointerleave:this.onpointerleave,onfocus:this.onfocus,onblur:this.onblur,...this.attachment})));this.opts=t,this.content=e,this.attachment=ln(this.opts.ref),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this)}onpointermove(t){if(!t.defaultPrevented&&Dn(t))if(this.opts.disabled.current)this.content.onItemLeave(t);else{if(this.content.onItemEnter())return;const n=t.currentTarget;if(!H(n))return;n.focus()}}onpointerleave(t){t.defaultPrevented||Dn(t)&&this.content.onItemLeave(t)}onfocus(t){_(()=>{t.defaultPrevented||this.opts.disabled.current||m(s(this,gt),!0)})}onblur(t){_(()=>{t.defaultPrevented||m(s(this,gt),!1)})}get props(){return v(s(this,jt))}set props(t){m(s(this,jt),t)}}gt=new WeakMap,jt=new WeakMap;var Yt,xe,gr,Xt;const wn=class wn{constructor(t,e){u(this,xe);f(this,"opts");f(this,"item");f(this,"root");u(this,Yt,!1);u(this,Xt,q(()=>_r(this.item.props,{onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown})));this.opts=t,this.item=e,this.root=e.content.parentMenu.root,this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this)}static create(t){const e=new Vs(t,pr.get());return new wn(t,e)}onkeydown(t){const e=this.item.content.search!=="";if(!(this.item.opts.disabled.current||e&&t.key===fn)&&cs.includes(t.key)){if(!H(t.currentTarget))return;t.currentTarget.click(),t.preventDefault()}}onclick(t){this.item.opts.disabled.current||b(this,xe,gr).call(this)}onpointerup(t){var e;if(!t.defaultPrevented&&!s(this,Yt)){if(!H(t.currentTarget))return;(e=t.currentTarget)==null||e.click()}}onpointerdown(t){p(this,Yt,!0)}get props(){return v(s(this,Xt))}set props(t){m(s(this,Xt),t)}};Yt=new WeakMap,xe=new WeakSet,gr=function(){if(this.item.opts.disabled.current)return;const t=new CustomEvent("menuitemselect",{bubbles:!0,cancelable:!0});if(this.opts.onSelect.current(t),t.defaultPrevented){this.item.content.parentMenu.root.isUsingKeyboard.current=!1;return}this.opts.closeOnSelect.current&&this.item.content.parentMenu.root.opts.onClose()},Xt=new WeakMap;let Wn=wn;var Ee,Zt;const Tn=class Tn{constructor(t,e){f(this,"opts");f(this,"parentMenu");f(this,"attachment");f(this,"onclick",t=>{this.opts.disabled.current||t.detail!==0||(this.parentMenu.toggleOpen(),t.preventDefault())});f(this,"onpointerdown",t=>{if(!this.opts.disabled.current){if(t.pointerType==="touch")return t.preventDefault();t.button===0&&t.ctrlKey===!1&&(this.parentMenu.toggleOpen(),this.parentMenu.opts.open.current||t.preventDefault())}});f(this,"onpointerup",t=>{this.opts.disabled.current||t.pointerType==="touch"&&(t.preventDefault(),this.parentMenu.toggleOpen())});f(this,"onkeydown",t=>{if(!this.opts.disabled.current){if(t.key===fn||t.key===Zn){this.parentMenu.toggleOpen(),t.preventDefault();return}t.key===Ot&&(this.parentMenu.onOpen(),t.preventDefault())}});u(this,Ee,q(()=>{if(this.parentMenu.opts.open.current&&this.parentMenu.contentId.current)return this.parentMenu.contentId.current}));u(this,Zt,q(()=>({id:this.opts.id.current,disabled:this.opts.disabled.current,"aria-haspopup":"menu","aria-expanded":Yn(this.parentMenu.opts.open.current),"aria-controls":v(s(this,Ee)),"data-disabled":jn(this.opts.disabled.current),"data-state":Hn(this.parentMenu.opts.open.current),[this.parentMenu.root.getBitsAttr("trigger")]:"",onclick:this.onclick,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup,onkeydown:this.onkeydown,...this.attachment})));this.opts=t,this.parentMenu=e,this.attachment=ln(this.opts.ref,n=>this.parentMenu.triggerNode=n)}static create(t){return new Tn(t,bn.get())}get props(){return v(s(this,Zt))}set props(t){m(s(this,Zt),t)}};Ee=new WeakMap,Zt=new WeakMap;let Gn=Tn;globalThis.bitsDismissableLayers??(globalThis.bitsDismissableLayers=new Map);var vt,it,X,mt,yt,Z,Jt,U,Ce,xt,vr,Ae,wt,Me,Ie,Fe,ke,Qt,mr,Ne,Oe;const Sn=class Sn{constructor(t){u(this,xt);f(this,"opts");u(this,vt);u(this,it);u(this,X,{pointerdown:!1});u(this,mt,!1);u(this,yt,!1);u(this,Z);u(this,Jt);u(this,U,F);u(this,Ce,t=>{t.defaultPrevented||this.opts.ref.current&&_(()=>{var e,n;!this.opts.ref.current||s(this,ke).call(this,t.target)||t.target&&!s(this,yt)&&((n=(e=s(this,Jt)).current)==null||n.call(e,t))})});u(this,Ae,t=>{let e=t;e.defaultPrevented&&(e=Un(t)),s(this,vt).current(t)});u(this,wt,On(t=>{if(!this.opts.ref.current){s(this,U).call(this);return}const e=this.opts.isValidEvent.current(t,this.opts.ref.current)||js(t,this.opts.ref.current);if(!s(this,mt)||b(this,xt,mr).call(this)||!e){s(this,U).call(this);return}let n=t;if(n.defaultPrevented&&(n=Un(n)),s(this,it).current!=="close"&&s(this,it).current!=="defer-otherwise-close"){s(this,U).call(this);return}t.pointerType==="touch"?(s(this,U).call(this),p(this,U,T(s(this,Z),"click",s(this,Ae),{once:!0}))):s(this,vt).current(n)},10));u(this,Me,t=>{s(this,X)[t.type]=!0});u(this,Ie,t=>{s(this,X)[t.type]=!1});u(this,Fe,()=>{this.opts.ref.current&&p(this,mt,Hs(this.opts.ref.current))});u(this,ke,t=>this.opts.ref.current?$n(this.opts.ref.current,t):!1);u(this,Qt,On(()=>{for(const t in s(this,X))s(this,X)[t]=!1;p(this,mt,!1)},20));u(this,Ne,()=>{p(this,yt,!0)});u(this,Oe,()=>{p(this,yt,!1)});f(this,"props",{onfocuscapture:s(this,Ne),onblurcapture:s(this,Oe)});this.opts=t,p(this,it,t.interactOutsideBehavior),p(this,vt,t.onInteractOutside),p(this,Jt,t.onFocusOutside),Et(()=>{p(this,Z,tr(this.opts.ref.current))});let e=F;const n=()=>{s(this,Qt).call(this),globalThis.bitsDismissableLayers.delete(this),s(this,wt).destroy(),e()};L([()=>this.opts.enabled.current,()=>this.opts.ref.current],()=>{if(!(!this.opts.enabled.current||!this.opts.ref.current))return Hr(1,()=>{this.opts.ref.current&&(globalThis.bitsDismissableLayers.set(this,s(this,it)),e(),e=b(this,xt,vr).call(this))}),n}),oe(()=>{s(this,Qt).destroy(),globalThis.bitsDismissableLayers.delete(this),s(this,wt).destroy(),s(this,U).call(this),e()})}static create(t){return new Sn(t)}};vt=new WeakMap,it=new WeakMap,X=new WeakMap,mt=new WeakMap,yt=new WeakMap,Z=new WeakMap,Jt=new WeakMap,U=new WeakMap,Ce=new WeakMap,xt=new WeakSet,vr=function(){return ft(T(s(this,Z),"pointerdown",ft(s(this,Me),s(this,Fe)),{capture:!0}),T(s(this,Z),"pointerdown",ft(s(this,Ie),s(this,wt))),T(s(this,Z),"focusin",s(this,Ce)))},Ae=new WeakMap,wt=new WeakMap,Me=new WeakMap,Ie=new WeakMap,Fe=new WeakMap,ke=new WeakMap,Qt=new WeakMap,mr=function(){return Object.values(s(this,X)).some(Boolean)},Ne=new WeakMap,Oe=new WeakMap;let tn=Sn;function qs(r=[...globalThis.bitsDismissableLayers]){return r.findLast(([t,{current:e}])=>e==="close"||e==="ignore")}function Hs(r){const t=[...globalThis.bitsDismissableLayers],e=qs(t);if(e)return e[0].opts.ref.current===r;const[n]=t[0];return n.opts.ref.current===r}function js(r,t){const e=r.target;if(!Qn(e))return!1;const n=!!e.closest(`[${Ws}]`);if("button"in r&&r.button>0&&!n)return!1;if("button"in r&&r.button===0&&n)return!0;const i=!!t.closest(`[${Gs}]`);return n&&i?!1:tr(e).documentElement.contains(e)&&!$n(t,e)&&us(r,t)}function Un(r){const t=r.currentTarget,e=r.target;let n;r instanceof PointerEvent?n=new PointerEvent(r.type,r):n=new PointerEvent("pointerdown",r);let i=!1;return new Proxy(n,{get:(a,c)=>c==="currentTarget"?t:c==="target"?e:c==="preventDefault"?()=>{i=!0,typeof a.preventDefault=="function"&&a.preventDefault()}:c==="defaultPrevented"?i:c in a?a[c]:r[c]})}function li(r,t){se(t,!0);let e=C(t,"interactOutsideBehavior",3,"close"),n=C(t,"onInteractOutside",3,F),i=C(t,"onFocusOutside",3,F),o=C(t,"isValidEvent",3,()=>!1);const a=tn.create({id:y(()=>t.id),interactOutsideBehavior:y(()=>e()),onInteractOutside:y(()=>n()),enabled:y(()=>t.enabled),onFocusOutside:y(()=>i()),isValidEvent:y(()=>o()),ref:t.ref});var c=We(),l=Ue(c);_e(l,()=>t.children??ze,()=>({props:a.props})),Ge(r,c),ie()}globalThis.bitsEscapeLayers??(globalThis.bitsEscapeLayers=new Map);var De,Pe;const xn=class xn{constructor(t){f(this,"opts");f(this,"domContext");u(this,De,()=>T(this.domContext.getDocument(),"keydown",s(this,Pe),{passive:!1}));u(this,Pe,t=>{if(t.key!==jr||!Ys(this))return;const e=new KeyboardEvent(t.type,t);t.preventDefault();const n=this.opts.escapeKeydownBehavior.current;n!=="close"&&n!=="defer-otherwise-close"||this.opts.onEscapeKeydown.current(e)});this.opts=t,this.domContext=new cn(this.opts.ref);let e=F;L(()=>t.enabled.current,n=>(n&&(globalThis.bitsEscapeLayers.set(this,t.escapeKeydownBehavior),e=s(this,De).call(this)),()=>{e(),globalThis.bitsEscapeLayers.delete(this)}))}static create(t){return new xn(t)}};De=new WeakMap,Pe=new WeakMap;let en=xn;function Ys(r){const t=[...globalThis.bitsEscapeLayers],e=t.findLast(([i,{current:o}])=>o==="close"||o==="ignore");if(e)return e[0]===r;const[n]=t[0];return n===r}function hi(r,t){se(t,!0);let e=C(t,"escapeKeydownBehavior",3,"close"),n=C(t,"onEscapeKeydown",3,F);en.create({escapeKeydownBehavior:y(()=>e()),onEscapeKeydown:y(()=>n()),enabled:y(()=>t.enabled),ref:t.ref});var i=We(),o=Ue(i);_e(o,()=>t.children??ze),Ge(r,i),ie()}var z,$t,ot;const Re=class Re{constructor(){u(this,z,Vr([]));u(this,$t,new WeakMap);u(this,ot,new WeakMap)}static getInstance(){return this.instance||(this.instance=new Re),this.instance}register(t){const e=this.getActive();e&&e!==t&&e.pause();const n=document.activeElement;n&&n!==document.body&&s(this,ot).set(t,n),s(this,z).current=s(this,z).current.filter(i=>i!==t),s(this,z).current.unshift(t)}unregister(t){s(this,z).current=s(this,z).current.filter(n=>n!==t);const e=this.getActive();e&&e.resume()}getActive(){return s(this,z).current[0]}setFocusMemory(t,e){s(this,$t).set(t,e)}getFocusMemory(t){return s(this,$t).get(t)}isActiveScope(t){return this.getActive()===t}setPreFocusMemory(t,e){s(this,ot).set(t,e)}getPreFocusMemory(t){return s(this,ot).get(t)}clearPreFocusMemory(t){s(this,ot).delete(t)}};z=new WeakMap,$t=new WeakMap,ot=new WeakMap,f(Re,"instance");let nn=Re;var J,E,M,at,Q,w,yr,wr,Tr,Sr,sn,de,on;const En=class En{constructor(t){u(this,w);u(this,J,!1);u(this,E,null);u(this,M,nn.getInstance());u(this,at,[]);u(this,Q);p(this,Q,t)}get paused(){return s(this,J)}pause(){p(this,J,!0)}resume(){p(this,J,!1)}mount(t){s(this,E)&&this.unmount(),p(this,E,t),s(this,M).register(this),b(this,w,Sr).call(this),b(this,w,wr).call(this)}unmount(){s(this,E)&&(b(this,w,yr).call(this),b(this,w,Tr).call(this),s(this,M).unregister(this),s(this,M).clearPreFocusMemory(this),p(this,E,null))}static use(t){let e=null;return L([()=>t.ref.current,()=>t.enabled.current],([n,i])=>{n&&i?(e||(e=new En(t)),e.mount(n)):e&&(e.unmount(),e=null)}),oe(()=>{e==null||e.unmount()}),{get props(){return{tabindex:-1}}}}};J=new WeakMap,E=new WeakMap,M=new WeakMap,at=new WeakMap,Q=new WeakMap,w=new WeakSet,yr=function(){for(const t of s(this,at))t();p(this,at,[])},wr=function(){if(!s(this,E))return;const t=new CustomEvent("focusScope.onOpenAutoFocus",{bubbles:!1,cancelable:!0});s(this,Q).onOpenAutoFocus.current(t),t.defaultPrevented||requestAnimationFrame(()=>{if(!s(this,E))return;const e=b(this,w,de).call(this);e?(e.focus(),s(this,M).setFocusMemory(this,e)):s(this,E).focus()})},Tr=function(){var e,n;const t=new CustomEvent("focusScope.onCloseAutoFocus",{bubbles:!1,cancelable:!0});if((n=(e=s(this,Q).onCloseAutoFocus).current)==null||n.call(e,t),!t.defaultPrevented){const i=s(this,M).getPreFocusMemory(this);if(i&&document.contains(i))try{i.focus()}catch{document.body.focus()}}},Sr=function(){if(!s(this,E)||!s(this,Q).trap.current)return;const t=s(this,E),e=t.ownerDocument,n=a=>{if(s(this,J)||!s(this,M).isActiveScope(this))return;const c=a.target;if(!c)return;if(t.contains(c))s(this,M).setFocusMemory(this,c);else{const h=s(this,M).getFocusMemory(this);if(h&&t.contains(h)&&hr(h))a.preventDefault(),h.focus();else{const g=b(this,w,de).call(this),d=b(this,w,on).call(this)[0];(g||d||t).focus()}}},i=a=>{if(!s(this,Q).loop||s(this,J)||a.key!=="Tab"||!s(this,M).isActiveScope(this))return;const c=b(this,w,sn).call(this);if(c.length<2)return;const l=c[0],h=c[c.length-1];!a.shiftKey&&e.activeElement===h?(a.preventDefault(),l.focus()):a.shiftKey&&e.activeElement===l&&(a.preventDefault(),h.focus())};s(this,at).push(T(e,"focusin",n,{capture:!0}),T(t,"keydown",i));const o=new MutationObserver(()=>{const a=s(this,M).getFocusMemory(this);if(a&&!t.contains(a)){const c=b(this,w,de).call(this),l=b(this,w,on).call(this)[0],h=c||l;h?(h.focus(),s(this,M).setFocusMemory(this,h)):t.focus()}});o.observe(t,{childList:!0,subtree:!0}),s(this,at).push(()=>o.disconnect())},sn=function(){return s(this,E)?cr(s(this,E),{includeContainer:!1,getShadowRoot:!0}):[]},de=function(){return b(this,w,sn).call(this)[0]||null},on=function(){return s(this,E)?lr(s(this,E),{includeContainer:!1,getShadowRoot:!0}):[]};let rn=En;function di(r,t){se(t,!0);let e=C(t,"enabled",3,!1),n=C(t,"trapFocus",3,!1),i=C(t,"loop",3,!1),o=C(t,"onCloseAutoFocus",3,F),a=C(t,"onOpenAutoFocus",3,F);const c=rn.use({enabled:y(()=>e()),trap:y(()=>n()),loop:i(),onCloseAutoFocus:y(()=>o()),onOpenAutoFocus:y(()=>a()),ref:t.ref});var l=We(),h=Ue(l);_e(h,()=>t.focusScope??ze,()=>({props:c.props})),Ge(r,l),ie()}globalThis.bitsTextSelectionLayers??(globalThis.bitsTextSelectionLayers=new Map);var Tt,Le,xr,Be,te;const Cn=class Cn{constructor(t){u(this,Le);f(this,"opts");f(this,"domContext");u(this,Tt,F);u(this,Be,t=>{const e=this.opts.ref.current,n=t.target;!H(e)||!H(n)||!this.opts.enabled.current||!Zs(this)||!Pr(e,n)||(this.opts.onPointerDown.current(t),!t.defaultPrevented&&p(this,Tt,Xs(e,this.domContext.getDocument().body)))});u(this,te,()=>{s(this,Tt).call(this),p(this,Tt,F)});this.opts=t,this.domContext=new cn(t.ref);let e=F;L(()=>this.opts.enabled.current,n=>(n&&(globalThis.bitsTextSelectionLayers.set(this,this.opts.enabled),e(),e=b(this,Le,xr).call(this)),()=>{e(),s(this,te).call(this),globalThis.bitsTextSelectionLayers.delete(this)}))}static create(t){return new Cn(t)}};Tt=new WeakMap,Le=new WeakSet,xr=function(){return ft(T(this.domContext.getDocument(),"pointerdown",s(this,Be)),T(this.domContext.getDocument(),"pointerup",qr(s(this,te),this.opts.onPointerUp.current)))},Be=new WeakMap,te=new WeakMap;let an=Cn;const zn=r=>r.style.userSelect||r.style.webkitUserSelect;function Xs(r,t){const e=zn(t),n=zn(r);return ae(t,"none"),ae(r,"text"),()=>{ae(t,e),ae(r,n)}}function ae(r,t){r.style.userSelect=t,r.style.webkitUserSelect=t}function Zs(r){const t=[...globalThis.bitsTextSelectionLayers];if(!t.length)return!1;const e=t.at(-1);return e?e[0]===r:!1}function fi(r,t){se(t,!0);let e=C(t,"preventOverflowTextSelection",3,!0),n=C(t,"onPointerDown",3,F),i=C(t,"onPointerUp",3,F);an.create({id:y(()=>t.id),onPointerDown:y(()=>n()),onPointerUp:y(()=>i()),enabled:y(()=>t.enabled&&e()),ref:t.ref});var o=We(),a=Ue(o);_e(a,()=>t.children??ze),Ge(r,o),ie()}globalThis.bitsIdCounter??(globalThis.bitsIdCounter={current:0});function Js(r="bits"){return globalThis.bitsIdCounter.current++,`${r}-${globalThis.bitsIdCounter.current}`}var ee,St,ut,ct,Ke,Er;class Qs{constructor(t){u(this,Ke);u(this,ee);u(this,St,0);u(this,ut,S());u(this,ct);p(this,ee,t)}get(...t){return p(this,St,s(this,St)+1),v(s(this,ut))===void 0&&p(this,ct,qn(()=>{m(s(this,ut),s(this,ee).call(this,...t),!0)})),Et(()=>()=>{b(this,Ke,Er).call(this)}),v(s(this,ut))}}ee=new WeakMap,St=new WeakMap,ut=new WeakMap,ct=new WeakMap,Ke=new WeakSet,Er=function(){p(this,St,s(this,St)-1),s(this,ct)&&s(this,St)<=0&&(s(this,ct).call(this),m(s(this,ut),void 0),p(this,ct,void 0))};const fe=new je;let ue=S(null),et=null,It=null,Ft=!1;const _n=y(()=>{for(const r of fe.values())if(r)return!0;return!1});let He=null;const $s=new Qs(()=>{function r(){document.body.setAttribute("style",v(ue)??""),document.body.style.removeProperty("--scrollbar-width"),Nn&&(et==null||et()),m(ue,null)}function t(){It!==null&&(window.clearTimeout(It),It=null)}function e(i,o){t(),Ft=!0,He=Date.now();const a=He,c=()=>{It=null,He===a&&(Cr(fe)?Ft=!1:(Ft=!1,o()))},l=i===null?24:i;It=window.setTimeout(c,l)}function n(){v(ue)===null&&fe.size===0&&!Ft&&m(ue,document.body.getAttribute("style"),!0)}return L(()=>_n.current,()=>{var g,d;if(!_n.current)return;n(),Ft=!1;const i=getComputedStyle(document.documentElement),o=getComputedStyle(document.body),a=((g=i.scrollbarGutter)==null?void 0:g.includes("stable"))||((d=o.scrollbarGutter)==null?void 0:d.includes("stable")),c=window.innerWidth-document.documentElement.clientWidth,h={padding:Number.parseInt(o.paddingRight??"0",10)+c,margin:Number.parseInt(o.marginRight??"0",10)};c>0&&!a&&(document.body.style.paddingRight=`${h.padding}px`,document.body.style.marginRight=`${h.margin}px`,document.body.style.setProperty("--scrollbar-width",`${c}px`)),document.body.style.overflow="hidden",Nn&&(et=T(document,"touchmove",A=>{A.target===document.documentElement&&(A.touches.length>1||A.preventDefault())},{passive:!1})),_(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})}),oe(()=>()=>{et==null||et()}),{get lockMap(){return fe},resetBodyStyle:r,scheduleCleanupIfNoNewLocks:e,cancelPendingCleanup:t,ensureInitialStyleCaptured:n}});var lt,ne,re,I;class ti{constructor(t,e=()=>null){u(this,lt,Js());u(this,ne);u(this,re,()=>null);u(this,I);f(this,"locked");p(this,ne,t),p(this,re,e),p(this,I,$s.get()),s(this,I)&&(s(this,I).cancelPendingCleanup(),s(this,I).ensureInitialStyleCaptured(),s(this,I).lockMap.set(s(this,lt),s(this,ne)??!1),this.locked=y(()=>s(this,I).lockMap.get(s(this,lt))??!1,n=>s(this,I).lockMap.set(s(this,lt),n)),oe(()=>{if(s(this,I).lockMap.delete(s(this,lt)),Cr(s(this,I).lockMap))return;const n=s(this,re).call(this);s(this,I).scheduleCleanupIfNoNewLocks(n,()=>{s(this,I).resetBodyStyle()})}))}}lt=new WeakMap,ne=new WeakMap,re=new WeakMap,I=new WeakMap;function Cr(r){for(const[t,e]of r)if(e)return!0;return!1}function pi(r,t){se(t,!0);let e=C(t,"preventScroll",3,!0),n=C(t,"restoreScrollDelay",3,null);e()&&new ti(e(),()=>n()),ie()}export{Gn as D,Zn as E,di as F,Wn as M,os as P,fn as S,fi as T,Ln as a,Bn as b,Kn as c,hi as d,li as e,pi as f,ci as g,Ye as h,es as i,ui as j,F as n,oe as o,Js as u};
